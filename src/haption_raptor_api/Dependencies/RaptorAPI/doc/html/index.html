<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>RaptorAPI: Main Page</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="logo.jpg"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">RaptorAPI
   &#160;<span id="projectnumber">1.2</span>
   </div>
   <div id="projectbrief">The new API for Haption force-feedback devices</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('index.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">RaptorAPI Documentation</div>  </div>
</div><!--header-->
<div class="contents">
<div class="toc"><h3>Table of Contents</h3>
<ul><li class="level1"><a href="#intro">Introduction</a></li>
<li class="level1"><a href="#new">New in version 1.2</a></li>
<li class="level1"><a href="#foreword">Getting started</a></li>
<li class="level1"><a href="#tutorial">Tutorial</a><ul><li class="level2"><a href="#init">Initializing the RaptorAPI</a></li>
<li class="level2"><a href="#calib">Calibrating the device</a></li>
<li class="level2"><a href="#mainloop">Setting up the periodic loop</a></li>
<li class="level2"><a href="#parameters">Setting the device parameters</a></li>
<li class="level2"><a href="#state">Reading the device state</a></li>
<li class="level2"><a href="#setpoints">Sending setpoints to the device</a></li>
</ul>
</li>
<li class="level1"><a href="#RaptorAPIsample">Complete source code example</a></li>
<li class="level1"><a href="#virtuoseapi">Converting code using the VirtuoseAPI to the RaptorAPI</a><ul><li class="level2"><a href="#introvirtuoseapi">Introduction</a></li>
<li class="level2"><a href="#prereqvirtuoseapi">Prerequisites</a></li>
<li class="level2"><a href="#adaptingvirtuoseapi">Adapting your code</a></li>
<li class="level2"><a href="#newvirtuoseapi">New functionalities</a></li>
</ul>
</li>
<li class="level1"><a href="#codesamples">Example test programs</a></li>
<li class="level1"><a href="#notes">Notes</a><ul><li class="level2"><a href="#limitations">Limited implementation</a></li>
<li class="level2"><a href="#parameter_list">List of parameters for Achille device</a></li>
</ul>
</li>
<li class="level1"><a href="#legal">Legal Information</a></li>
</ul>
</div>
<div class="textblock"><h1><a class="anchor" id="intro"></a>
Introduction</h1>
<p>The RaptorAPI is an Application Programming Interface (API) for the force-feedback devices of the Virtuose family.<br  />
At this point, it is only available for the C++ language, on the platforms Microsoft Windows and Linux.</p>
<h1><a class="anchor" id="new"></a>
New in version 1.2</h1>
<p>Version 1.2 adds the following methods:</p><ul>
<li><a class="el" href="class_h_a_p_t_i_o_n_1_1_raptor_a_p_i.html#a9ab54edc8bfab714333fd22cc8faae91" title="Change the anticipation factor for pose setpoints.">HAPTION::RaptorAPI::ChangeAnticipationFactor</a></li>
<li><a class="el" href="class_h_a_p_t_i_o_n_1_1_raptor_a_p_i.html#a421c09e88ce8bbfd4a8fb17493c24c01" title="Change the TCP offset of the robot with respect to the wrist.">HAPTION::RaptorAPI::ChangeTCPOffset</a></li>
<li><a class="el" href="class_h_a_p_t_i_o_n_1_1_raptor_a_p_i.html#a827bb639dcf14efc63fd05311b82aceb" title="Define the clutching mode.">HAPTION::RaptorAPI::DefineClutchingMode</a></li>
<li><a class="el" href="class_h_a_p_t_i_o_n_1_1_raptor_a_p_i.html#a21b456198a1919527cae2a76ac792004" title="Define the height of the operator.">HAPTION::RaptorAPI::DefineOperatorHeight</a></li>
<li><a class="el" href="class_h_a_p_t_i_o_n_1_1_raptor_a_p_i.html#a64f2b8fbdeb2d799f259f8179406abfc" title="Get the value of a floating-point extension register.">HAPTION::RaptorAPI::GetExtRegister</a></li>
<li><a class="el" href="class_h_a_p_t_i_o_n_1_1_raptor_a_p_i.html#acb66dbe36d4ead106a465e84fe29ee48" title="Get the version of the firmware of the device.">HAPTION::RaptorAPI::GetFirmwareVersion</a></li>
<li><a class="el" href="class_h_a_p_t_i_o_n_1_1_raptor_a_p_i.html#adc10f607651308fdb1cc4650b67855d9" title="Get the measured motors currents.">HAPTION::RaptorAPI::GetMotorCurrents</a></li>
<li><a class="el" href="class_h_a_p_t_i_o_n_1_1_raptor_a_p_i.html#abcc04aeb6187b1ac3fabcaf64613b4c0" title="Get the detailed status of the motors.">HAPTION::RaptorAPI::GetMotorStatus</a></li>
<li><a class="el" href="class_h_a_p_t_i_o_n_1_1_raptor_a_p_i.html#aaecdca7d63e49eb11044da17d558d675" title="Get the value of a configuration parameter of type string.">HAPTION::RaptorAPI::GetParameterValue</a></li>
<li><a class="el" href="class_h_a_p_t_i_o_n_1_1_raptor_a_p_i.html#ad0a052aebd461b772978a5feff9ac393" title="Get the detailed status of the primary position encoders.">HAPTION::RaptorAPI::GetPrimarySensorsStatus</a></li>
<li><a class="el" href="class_h_a_p_t_i_o_n_1_1_raptor_a_p_i.html#a50b838917d4141fccd042fd0719bc103" title="Get the detailed status of the redundant position encoders.">HAPTION::RaptorAPI::GetRedundantSensorsStatus</a></li>
<li><a class="el" href="class_h_a_p_t_i_o_n_1_1_raptor_a_p_i.html#a25603601b3ca1b71baba244a1c389286" title="Set the value of a floating-point extension register.">HAPTION::RaptorAPI::SetExtRegister</a></li>
</ul>
<p>One method has changed name:</p><ul>
<li><a class="el" href="class_h_a_p_t_i_o_n_1_1_raptor_a_p_i.html#a8dd57923b91f7703f32e509b4b1f0f11" title="Define field values needed by the specific device.">HAPTION::RaptorAPI::DefineSpecificFields</a> (used to be SetSpecificFields)</li>
</ul>
<p>Two methods previously defined as "void" are now returning <a class="el" href="namespace_h_a_p_t_i_o_n.html#a2bc70f945918c02a2321840c292d07c4afab94e0fac7e028ed75c31a7c8adc18e" title="No error (0)">HAPTION::ErrorCode::E_NOERROR</a> (needed for compliance with AUTOSAR C++):</p><ul>
<li><a class="el" href="class_h_a_p_t_i_o_n_1_1_raptor_a_p_i.html#af21b74c1e8ea2f1d39018819906ad4b8" title="Get the version of the RaptorAPI.">HAPTION::RaptorAPI::GetVersion</a></li>
<li><a class="el" href="class_h_a_p_t_i_o_n_1_1_raptor_a_p_i.html#a90bea074992318822a811f42ca523328" title="Get the last error report.">HAPTION::RaptorAPI::GetLastError</a></li>
</ul>
<p>Two methods have been removed because obsolete:</p><ul>
<li>HAPTION::RaptorAPI::StartLogging</li>
<li>HAPTION::RaptorAPI::StopLogging</li>
</ul>
<p>The documentation has been improved significantly:</p><ul>
<li>The interface <a class="el" href="class_h_a_p_t_i_o_n_1_1_simple_channel_1_1_simple_channel_interface.html" title="SimpleChannel interface class (pure virtual), to be implemented as shared library.">HAPTION::SimpleChannel::SimpleChannelInterface</a> has been added</li>
<li>The error codes returned by the methods are now listed</li>
</ul>
<p>Finally, the method <a class="el" href="class_h_a_p_t_i_o_n_1_1_raptor_a_p_i.html#af1c6cf729558de312330b074dcfa919e" title="Initialize the class object and try to connect to the device with the given configuration file.">HAPTION::RaptorAPI::Init</a> is now more versatile, please check section <a class="el" href="index.html#init">Initializing the RaptorAPI</a>!</p>
<h1><a class="anchor" id="foreword"></a>
Getting started</h1>
<p>Before starting, you will need to acquire from Haption the following files:</p><ul>
<li>The header files <a class="el" href="_raptor_a_p_i_8hpp.html">RaptorAPI.hpp</a>, <a class="el" href="_robot_types_8hpp.html">RobotTypes.hpp</a> and <a class="el" href="_types_8hpp.html">Types.hpp</a></li>
<li>The software library file for your operating system</li>
<li>The parameter file for your own Virtuose device</li>
</ul>
<h1><a class="anchor" id="tutorial"></a>
Tutorial</h1>
<p>The API is composed of a single C++ class, called <a class="el" href="class_h_a_p_t_i_o_n_1_1_raptor_a_p_i.html" title="Robotic Application Programming Interface for haptic devices produced by Haption.">HAPTION::RaptorAPI</a>.<br  />
The class defines no specific constructor, so you can use the default constructor or declare an object on the stack.</p>
<h2><a class="anchor" id="init"></a>
Initializing the RaptorAPI</h2>
<p>The initialization is actually carried out by the method <a class="el" href="class_h_a_p_t_i_o_n_1_1_raptor_a_p_i.html#af1c6cf729558de312330b074dcfa919e" title="Initialize the class object and try to connect to the device with the given configuration file.">HAPTION::RaptorAPI::Init()</a>, to which you need to give the path of the configuration file. But beforehand, you must set up the transport channel to be used, as a series of "specific fields" identifying the DLL to be loaded and the parameters for the channel. In the case of an Ethernet-based device, the specific fields are:</p><ul>
<li>"channel": set to "SimpleChannelUDP"</li>
<li>"localport": any free UDP port</li>
<li>"localip": if not set, then set to "localhost"</li>
<li>"remoteport": must be set to 5000</li>
<li>"remoteip": IP address of the device</li>
</ul>
<p>In the case of an EtherCAT-based device connected to a Hilscher CIFX master card, the specific fields are:</p><ul>
<li>"channel": set to "SimpleChannelCIFX"</li>
<li>"card": CIFX card number (Linux only), typically 0</li>
<li>"slot": CIFX card slot setting, typically 1</li>
<li>"offset": offset on the bus, typically 0</li>
</ul>
<p>The method <a class="el" href="class_h_a_p_t_i_o_n_1_1_raptor_a_p_i.html#a8dd57923b91f7703f32e509b4b1f0f11" title="Define field values needed by the specific device.">HAPTION::RaptorAPI::DefineSpecificFields()</a> awaits a string formed of assignments "field=value" separated by a colon, comma or semicolon. Here is an example of initialization: </p><div class="fragment"><div class="line"><span class="keywordtype">void</span> main()</div>
<div class="line">{</div>
<div class="line">  <a class="code" href="class_h_a_p_t_i_o_n_1_1_raptor_a_p_i.html">HAPTION::RaptorAPI</a> raptorHandle;</div>
<div class="line">  raptorHandle.<a class="code" href="class_h_a_p_t_i_o_n_1_1_raptor_a_p_i.html#a8dd57923b91f7703f32e509b4b1f0f11">DefineSpecificFields</a>(<span class="stringliteral">&quot;channel=SimpleChannelUDP;localport=3131;remoteip=192.168.100.53;remoteport=5000&quot;</span>);</div>
<div class="line">  <a class="code" href="namespace_h_a_p_t_i_o_n.html#a2bc70f945918c02a2321840c292d07c4">HAPTION::ErrorCode</a> error = raptorHandle.<a class="code" href="class_h_a_p_t_i_o_n_1_1_raptor_a_p_i.html#af1c6cf729558de312330b074dcfa919e">Init</a>(<span class="stringliteral">&quot;virtuose_6d_n162.param&quot;</span>);</div>
<div class="line">  <span class="keywordflow">if</span> (error != <a class="code" href="namespace_h_a_p_t_i_o_n.html#a2bc70f945918c02a2321840c292d07c4afab94e0fac7e028ed75c31a7c8adc18e">HAPTION::ErrorCode::E_NOERROR</a>)</div>
<div class="line">  {</div>
<div class="line">    <span class="comment">// Something went wrong!</span></div>
<div class="line">  }</div>
<div class="line">}</div>
<div class="ttc" id="aclass_h_a_p_t_i_o_n_1_1_raptor_a_p_i_html"><div class="ttname"><a href="class_h_a_p_t_i_o_n_1_1_raptor_a_p_i.html">HAPTION::RaptorAPI</a></div><div class="ttdoc">Robotic Application Programming Interface for haptic devices produced by Haption.</div><div class="ttdef"><b>Definition:</b> RaptorAPI.hpp:24</div></div>
<div class="ttc" id="aclass_h_a_p_t_i_o_n_1_1_raptor_a_p_i_html_a8dd57923b91f7703f32e509b4b1f0f11"><div class="ttname"><a href="class_h_a_p_t_i_o_n_1_1_raptor_a_p_i.html#a8dd57923b91f7703f32e509b4b1f0f11">HAPTION::RaptorAPI::DefineSpecificFields</a></div><div class="ttdeci">ErrorCode DefineSpecificFields(std::string const &amp;iSpecificFields) noexcept</div><div class="ttdoc">Define field values needed by the specific device.</div></div>
<div class="ttc" id="aclass_h_a_p_t_i_o_n_1_1_raptor_a_p_i_html_af1c6cf729558de312330b074dcfa919e"><div class="ttname"><a href="class_h_a_p_t_i_o_n_1_1_raptor_a_p_i.html#af1c6cf729558de312330b074dcfa919e">HAPTION::RaptorAPI::Init</a></div><div class="ttdeci">ErrorCode Init(std::string const &amp;iName, SimpleChannel::SimpleChannelInterface *const iChannel=nullptr) noexcept</div><div class="ttdoc">Initialize the class object and try to connect to the device with the given configuration file.</div></div>
<div class="ttc" id="anamespace_h_a_p_t_i_o_n_html_a2bc70f945918c02a2321840c292d07c4"><div class="ttname"><a href="namespace_h_a_p_t_i_o_n.html#a2bc70f945918c02a2321840c292d07c4">HAPTION::ErrorCode</a></div><div class="ttdeci">ErrorCode</div><div class="ttdoc">Error codes.</div><div class="ttdef"><b>Definition:</b> RobotTypes.hpp:92</div></div>
<div class="ttc" id="anamespace_h_a_p_t_i_o_n_html_a2bc70f945918c02a2321840c292d07c4afab94e0fac7e028ed75c31a7c8adc18e"><div class="ttname"><a href="namespace_h_a_p_t_i_o_n.html#a2bc70f945918c02a2321840c292d07c4afab94e0fac7e028ed75c31a7c8adc18e">HAPTION::ErrorCode::E_NOERROR</a></div><div class="ttdeci">@ E_NOERROR</div><div class="ttdoc">No error (0)</div></div>
</div><!-- fragment --><p><b>NEW!</b></p>
<p>Alternatively, you can create the SimpleChannel yourself and pass a pointer to the method <a class="el" href="class_h_a_p_t_i_o_n_1_1_raptor_a_p_i.html#af1c6cf729558de312330b074dcfa919e" title="Initialize the class object and try to connect to the device with the given configuration file.">HAPTION::RaptorAPI::Init()</a>, via the second optional parameter. The SimpleChannel must be open before calling <a class="el" href="class_h_a_p_t_i_o_n_1_1_raptor_a_p_i.html#af1c6cf729558de312330b074dcfa919e" title="Initialize the class object and try to connect to the device with the given configuration file.">HAPTION::RaptorAPI::Init()</a>. The method <a class="el" href="class_h_a_p_t_i_o_n_1_1_raptor_a_p_i.html#a7d11007a80f47fa5627861daaae27bd6" title="Close the connection and terminate.">HAPTION::RaptorAPI::Close()</a> will close the SimpleChannel, but it will not delete it.</p>
<p>Some Haption devices do not need a configuration file, as all the configuration parameters are embedded in the device control electronics. In that case, you can replace the name of the configuration file with the base name of the DLL (i.e. without "lib" prefix and ".so"/".dll" suffix).</p>
<p>Notes:</p><ul>
<li>The DLL of the SimpleChannelInterface to be used must be present and accessible to the RaptorAPI, otherwise the call to RaptorAPI::Init() will fail with "Unable to load DLL". Please note that, on Linux, placing the DLL alongside the binary is not enough, and you need to define the environment variable "LD_LIBRARY_PATH"!</li>
<li>We provide the interface definition <a class="el" href="_simple_channel_interface_8hpp.html" title="This file holds the definition of the interface class SimpleChannelInterface.">SimpleChannelInterface.hpp</a> and the source code SimpleChannelUDP.cpp for easy implementation of other transport channel DLLs.</li>
</ul>
<h2><a class="anchor" id="calib"></a>
Calibrating the device</h2>
<p>The next step is to check the calibration status of the device, using <a class="el" href="class_h_a_p_t_i_o_n_1_1_raptor_a_p_i.html#a227eea3581a66dd49f16ab2a983152ca" title="Get the calibration status of the device.">HAPTION::RaptorAPI::GetCalibrationStatus()</a>.<br  />
If the device is not yet calibrated, then of course it is necessary to calibrate it. This is done by calling <a class="el" href="class_h_a_p_t_i_o_n_1_1_raptor_a_p_i.html#ac48c7fadf530f4ffdaa48fb52d988ed0" title="Perform the device calibration.">HAPTION::RaptorAPI::DoCalibration()</a> at regular intervals, and checking the calibration status.<br  />
This is a typical code for performing calibration: </p><div class="fragment"><div class="line"><span class="comment">// Get calibration status</span></div>
<div class="line"><a class="code" href="namespace_h_a_p_t_i_o_n.html#aa28c612d2bd3f15964fd9d95a612c1d2">HAPTION::CalibrationStatus</a> calibrationStatus;</div>
<div class="line">raptorHandle.<a class="code" href="class_h_a_p_t_i_o_n_1_1_raptor_a_p_i.html#a227eea3581a66dd49f16ab2a983152ca">GetCalibrationStatus</a>(calibrationStatus);</div>
<div class="line"><span class="comment">// Perform calibration if needed</span></div>
<div class="line"><span class="keywordflow">if</span> (calibrationStatus != <a class="code" href="namespace_h_a_p_t_i_o_n.html#aa28c612d2bd3f15964fd9d95a612c1d2ab74e9b48ff9e648e114e62659d65b457">HAPTION::CalibrationStatus::C_CALIBRATED</a>)</div>
<div class="line">{</div>
<div class="line">    <span class="comment">// Activate force-feeback (needed only for automatic calibration)</span></div>
<div class="line">    raptorHandle.<a class="code" href="class_h_a_p_t_i_o_n_1_1_raptor_a_p_i.html#a34aab8ce513627579cc36dcc4d904d09">ActivateForceFeedback</a>(<span class="keyword">true</span>);</div>
<div class="line">    <span class="keywordflow">do</span></div>
<div class="line">    {</div>
<div class="line">        <a class="code" href="namespace_h_a_p_t_i_o_n.html#aa28c612d2bd3f15964fd9d95a612c1d2">HAPTION::CalibrationStatus</a> newStatus;</div>
<div class="line">        <span class="comment">// Call &quot;DoCalibration&quot; at regular intervals</span></div>
<div class="line">        Error = raptorHandle.<a class="code" href="class_h_a_p_t_i_o_n_1_1_raptor_a_p_i.html#ac48c7fadf530f4ffdaa48fb52d988ed0">DoCalibration</a>();</div>
<div class="line">        <span class="comment">// A period of 10 milliseconds is adequate</span></div>
<div class="line">        Sleep(10);</div>
<div class="line">        <span class="comment">// Check new status</span></div>
<div class="line">        raptorHandle.<a class="code" href="class_h_a_p_t_i_o_n_1_1_raptor_a_p_i.html#a227eea3581a66dd49f16ab2a983152ca">GetCalibrationStatus</a>(newStatus);</div>
<div class="line">        <span class="comment">// Display only if status changed</span></div>
<div class="line">        <span class="keywordflow">if</span> (newStatus != calibrationStatus)</div>
<div class="line">        {</div>
<div class="line">            <span class="keywordflow">switch</span> (newStatus)</div>
<div class="line">            {</div>
<div class="line">            <span class="keywordflow">case</span> <a class="code" href="namespace_h_a_p_t_i_o_n.html#aa28c612d2bd3f15964fd9d95a612c1d2ab6a103deb8de1a79d3be5e793e672dca">HAPTION::CalibrationStatus::C_WAITINGFORPOWER</a>:</div>
<div class="line">                std::cout &lt;&lt; <span class="stringliteral">&quot;Please push the power button!&quot;</span> &lt;&lt; std::endl;</div>
<div class="line">                <span class="keywordflow">break</span>;</div>
<div class="line">            <span class="keywordflow">case</span> <a class="code" href="namespace_h_a_p_t_i_o_n.html#aa28c612d2bd3f15964fd9d95a612c1d2a3d2fe591a1fc112d4c0c6850d419f339">HAPTION::CalibrationStatus::C_WAITINGFORUSER</a>:</div>
<div class="line">                std::cout &lt;&lt; <span class="stringliteral">&quot;Please push the calibration button with the handle!&quot;</span> &lt;&lt; std::endl;</div>
<div class="line">                <span class="keywordflow">break</span>;</div>
<div class="line">            <span class="keywordflow">case</span> <a class="code" href="namespace_h_a_p_t_i_o_n.html#aa28c612d2bd3f15964fd9d95a612c1d2af264b201e739e963074da0ad65c39e61">HAPTION::CalibrationStatus::C_MOVING</a>:</div>
<div class="line">                std::cout &lt;&lt; <span class="stringliteral">&quot;Warning: the device is moving!&quot;</span> &lt;&lt; std::endl;</div>
<div class="line">                <span class="keywordflow">break</span>;</div>
<div class="line">            <span class="keywordflow">case</span> <a class="code" href="namespace_h_a_p_t_i_o_n.html#aa28c612d2bd3f15964fd9d95a612c1d2ab74e9b48ff9e648e114e62659d65b457">HAPTION::CalibrationStatus::C_CALIBRATED</a>:</div>
<div class="line">                std::cout &lt;&lt; <span class="stringliteral">&quot;Calibration finished. Please remember to depress the power or the calibration button!&quot;</span> &lt;&lt; std::endl;</div>
<div class="line">                <span class="keywordflow">break</span>;</div>
<div class="line">            <span class="keywordflow">case</span> <a class="code" href="namespace_h_a_p_t_i_o_n.html#aa28c612d2bd3f15964fd9d95a612c1d2a4a6a359f54c82d1575cb0a529fd0c3a5">HAPTION::CalibrationStatus::C_CALIBRATIONFAILED</a>:</div>
<div class="line">                std::cout &lt;&lt; <span class="stringliteral">&quot;Calibration has failed, please restart again&quot;</span> &lt;&lt; std::endl;</div>
<div class="line">                <span class="keywordflow">break</span>;</div>
<div class="line">            <span class="keywordflow">case</span> <a class="code" href="namespace_h_a_p_t_i_o_n.html#aa28c612d2bd3f15964fd9d95a612c1d2af108f006f9707ff99570f01f120b7580">HAPTION::CalibrationStatus::C_IDLE</a>:</div>
<div class="line">                <span class="keywordflow">break</span>;</div>
<div class="line">            }</div>
<div class="line">        }</div>
<div class="line">        <span class="comment">// Update status</span></div>
<div class="line">        calibrationStatus = newStatus;</div>
<div class="line">    <span class="comment">// Exit in case of final success or error</span></div>
<div class="line">    } <span class="keywordflow">while</span> ((calibrationStatus != <a class="code" href="namespace_h_a_p_t_i_o_n.html#aa28c612d2bd3f15964fd9d95a612c1d2ab74e9b48ff9e648e114e62659d65b457">HAPTION::CalibrationStatus::C_CALIBRATED</a>)</div>
<div class="line">             &amp;&amp; (calibrationStatus != <a class="code" href="namespace_h_a_p_t_i_o_n.html#aa28c612d2bd3f15964fd9d95a612c1d2a4a6a359f54c82d1575cb0a529fd0c3a5">HAPTION::CalibrationStatus::C_CALIBRATIONFAILED</a>));</div>
<div class="line">    <span class="comment">// Deactivate force-feedback again</span></div>
<div class="line">    raptorHandle.<a class="code" href="class_h_a_p_t_i_o_n_1_1_raptor_a_p_i.html#a34aab8ce513627579cc36dcc4d904d09">ActivateForceFeedback</a>(<span class="keyword">false</span>);</div>
<div class="line">}</div>
<div class="ttc" id="aclass_h_a_p_t_i_o_n_1_1_raptor_a_p_i_html_a227eea3581a66dd49f16ab2a983152ca"><div class="ttname"><a href="class_h_a_p_t_i_o_n_1_1_raptor_a_p_i.html#a227eea3581a66dd49f16ab2a983152ca">HAPTION::RaptorAPI::GetCalibrationStatus</a></div><div class="ttdeci">ErrorCode GetCalibrationStatus(CalibrationStatus &amp;oIsCalibrated) noexcept</div><div class="ttdoc">Get the calibration status of the device.</div></div>
<div class="ttc" id="aclass_h_a_p_t_i_o_n_1_1_raptor_a_p_i_html_a34aab8ce513627579cc36dcc4d904d09"><div class="ttname"><a href="class_h_a_p_t_i_o_n_1_1_raptor_a_p_i.html#a34aab8ce513627579cc36dcc4d904d09">HAPTION::RaptorAPI::ActivateForceFeedback</a></div><div class="ttdeci">ErrorCode ActivateForceFeedback(bool const iActivate) noexcept</div><div class="ttdoc">Activate or deactivate force-feedback.</div></div>
<div class="ttc" id="aclass_h_a_p_t_i_o_n_1_1_raptor_a_p_i_html_ac48c7fadf530f4ffdaa48fb52d988ed0"><div class="ttname"><a href="class_h_a_p_t_i_o_n_1_1_raptor_a_p_i.html#ac48c7fadf530f4ffdaa48fb52d988ed0">HAPTION::RaptorAPI::DoCalibration</a></div><div class="ttdeci">ErrorCode DoCalibration() noexcept</div><div class="ttdoc">Perform the device calibration.</div></div>
<div class="ttc" id="anamespace_h_a_p_t_i_o_n_html_aa28c612d2bd3f15964fd9d95a612c1d2"><div class="ttname"><a href="namespace_h_a_p_t_i_o_n.html#aa28c612d2bd3f15964fd9d95a612c1d2">HAPTION::CalibrationStatus</a></div><div class="ttdeci">CalibrationStatus</div><div class="ttdoc">Calibration status.</div><div class="ttdef"><b>Definition:</b> RobotTypes.hpp:255</div></div>
<div class="ttc" id="anamespace_h_a_p_t_i_o_n_html_aa28c612d2bd3f15964fd9d95a612c1d2a3d2fe591a1fc112d4c0c6850d419f339"><div class="ttname"><a href="namespace_h_a_p_t_i_o_n.html#aa28c612d2bd3f15964fd9d95a612c1d2a3d2fe591a1fc112d4c0c6850d419f339">HAPTION::CalibrationStatus::C_WAITINGFORUSER</a></div><div class="ttdeci">@ C_WAITINGFORUSER</div><div class="ttdoc">Waiting for the user to move to the calibration position and push the calibration button.</div></div>
<div class="ttc" id="anamespace_h_a_p_t_i_o_n_html_aa28c612d2bd3f15964fd9d95a612c1d2a4a6a359f54c82d1575cb0a529fd0c3a5"><div class="ttname"><a href="namespace_h_a_p_t_i_o_n.html#aa28c612d2bd3f15964fd9d95a612c1d2a4a6a359f54c82d1575cb0a529fd0c3a5">HAPTION::CalibrationStatus::C_CALIBRATIONFAILED</a></div><div class="ttdeci">@ C_CALIBRATIONFAILED</div><div class="ttdoc">Failed to calibrate.</div></div>
<div class="ttc" id="anamespace_h_a_p_t_i_o_n_html_aa28c612d2bd3f15964fd9d95a612c1d2ab6a103deb8de1a79d3be5e793e672dca"><div class="ttname"><a href="namespace_h_a_p_t_i_o_n.html#aa28c612d2bd3f15964fd9d95a612c1d2ab6a103deb8de1a79d3be5e793e672dca">HAPTION::CalibrationStatus::C_WAITINGFORPOWER</a></div><div class="ttdeci">@ C_WAITINGFORPOWER</div><div class="ttdoc">Waiting for the operator to push the power button.</div></div>
<div class="ttc" id="anamespace_h_a_p_t_i_o_n_html_aa28c612d2bd3f15964fd9d95a612c1d2ab74e9b48ff9e648e114e62659d65b457"><div class="ttname"><a href="namespace_h_a_p_t_i_o_n.html#aa28c612d2bd3f15964fd9d95a612c1d2ab74e9b48ff9e648e114e62659d65b457">HAPTION::CalibrationStatus::C_CALIBRATED</a></div><div class="ttdeci">@ C_CALIBRATED</div><div class="ttdoc">Successfully calibrated.</div></div>
<div class="ttc" id="anamespace_h_a_p_t_i_o_n_html_aa28c612d2bd3f15964fd9d95a612c1d2af108f006f9707ff99570f01f120b7580"><div class="ttname"><a href="namespace_h_a_p_t_i_o_n.html#aa28c612d2bd3f15964fd9d95a612c1d2af108f006f9707ff99570f01f120b7580">HAPTION::CalibrationStatus::C_IDLE</a></div><div class="ttdeci">@ C_IDLE</div><div class="ttdoc">Initial status.</div></div>
<div class="ttc" id="anamespace_h_a_p_t_i_o_n_html_aa28c612d2bd3f15964fd9d95a612c1d2af264b201e739e963074da0ad65c39e61"><div class="ttname"><a href="namespace_h_a_p_t_i_o_n.html#aa28c612d2bd3f15964fd9d95a612c1d2af264b201e739e963074da0ad65c39e61">HAPTION::CalibrationStatus::C_MOVING</a></div><div class="ttdeci">@ C_MOVING</div><div class="ttdoc">Currently moving towards the joint limits.</div></div>
</div><!-- fragment --><h2><a class="anchor" id="mainloop"></a>
Setting up the periodic loop</h2>
<p>Once the connection to the device is active and the calibration is done, your code should perform a periodic loop. Your code should call at least two methods periodically: <a class="el" href="class_h_a_p_t_i_o_n_1_1_raptor_a_p_i.html#ad97bcd2322fb21fbaec3f8bb62d97d4b" title="Perform state update.">HAPTION::RaptorAPI::ReadState()</a> and <a class="el" href="class_h_a_p_t_i_o_n_1_1_raptor_a_p_i.html#aa5626a4cc27dbe0cb75c2e6c0b5c2532" title="Perform setpoint update.">HAPTION::RaptorAPI::SendSetpoints()</a>. For a good performance, the period should be as close as possible to 1 millisecond, and the jitter should be as low as possible.</p>
<p>For example, you can use the C++ module "chrono" for performing a busy-wait with microsecond precision: </p><div class="fragment"><div class="line"><span class="comment">// This is the time-stamp of the last loop</span></div>
<div class="line"><span class="keyword">auto</span> lastStep = std::chrono::system_clock::now();</div>
<div class="line"><span class="keywordflow">do</span></div>
<div class="line">{</div>
<div class="line">    <span class="comment">// Call HAPTION::RaptorAPI::ReadState()</span></div>
<div class="line">    std::chrono::time_point&lt;std::chrono::system_clock&gt; timeStamp;</div>
<div class="line">    error = raptorHandle.<a class="code" href="class_h_a_p_t_i_o_n_1_1_raptor_a_p_i.html#ad97bcd2322fb21fbaec3f8bb62d97d4b">ReadState</a>(timeStamp);</div>
<div class="line">    </div>
<div class="line">    <span class="comment">// Perform needed activities</span></div>
<div class="line">    </div>
<div class="line">    <span class="comment">// Call HAPTION::RaptorAPI::SendSetpoints()</span></div>
<div class="line">    error = raptorHandle.<a class="code" href="class_h_a_p_t_i_o_n_1_1_raptor_a_p_i.html#aa5626a4cc27dbe0cb75c2e6c0b5c2532">SendSetpoints</a>();</div>
<div class="line">    </div>
<div class="line">    <span class="comment">// Enter busy-wait</span></div>
<div class="line">    <span class="keywordflow">while</span> (<span class="keyword">true</span>)</div>
<div class="line">    {</div>
<div class="line">        <span class="comment">// Get current time</span></div>
<div class="line">        <span class="keyword">auto</span> now = std::chrono::system_clock::now();</div>
<div class="line">        <span class="comment">// Compute duration since last loop in microseconds</span></div>
<div class="line">        <span class="keyword">auto</span> duration = std::chrono::duration_cast&lt;std::chrono::microseconds&gt;(now - lastStep).count();</div>
<div class="line">        <span class="comment">// Exit when one millisecond has been reached</span></div>
<div class="line">        <span class="keywordflow">if</span> (duration &gt; 1000)</div>
<div class="line">        {</div>
<div class="line">            lastStep = now;</div>
<div class="line">            <span class="keywordflow">break</span>;</div>
<div class="line">        }</div>
<div class="line">    }</div>
<div class="line">}</div>
<div class="line"><span class="keywordflow">while</span> (<span class="keyword">true</span>);</div>
<div class="ttc" id="aclass_h_a_p_t_i_o_n_1_1_raptor_a_p_i_html_aa5626a4cc27dbe0cb75c2e6c0b5c2532"><div class="ttname"><a href="class_h_a_p_t_i_o_n_1_1_raptor_a_p_i.html#aa5626a4cc27dbe0cb75c2e6c0b5c2532">HAPTION::RaptorAPI::SendSetpoints</a></div><div class="ttdeci">ErrorCode SendSetpoints() noexcept</div><div class="ttdoc">Perform setpoint update.</div></div>
<div class="ttc" id="aclass_h_a_p_t_i_o_n_1_1_raptor_a_p_i_html_ad97bcd2322fb21fbaec3f8bb62d97d4b"><div class="ttname"><a href="class_h_a_p_t_i_o_n_1_1_raptor_a_p_i.html#ad97bcd2322fb21fbaec3f8bb62d97d4b">HAPTION::RaptorAPI::ReadState</a></div><div class="ttdeci">ErrorCode ReadState(std::chrono::time_point&lt; std::chrono::system_clock &gt; &amp;oTimeStamp, uint16_t const iTimeout=0U) noexcept</div><div class="ttdoc">Perform state update.</div></div>
</div><!-- fragment --><p>You can also use any other means to create the periodic loop, for example a timer. However, you need to be aware that, short of applying a real-time patch on the Operating System kernel, such methods usually don't lead to good performances, especially for periods below 10 milliseconds.</p>
<p>Alternatively, you can use the optional parameter "iTimeout" of the method ReadState, as shown here:</p>
<div class="fragment"><div class="line"><span class="comment">// This is the time-stamp of the last loop</span></div>
<div class="line"><span class="keyword">auto</span> lastStep = std::chrono::system_clock::now();</div>
<div class="line"><span class="keywordflow">do</span></div>
<div class="line">{</div>
<div class="line">    <span class="comment">// Call HAPTION::RaptorAPI::ReadState() with a timeout of 1 millisecond</span></div>
<div class="line">    std::chrono::time_point&lt;std::chrono::system_clock&gt; timeStamp;</div>
<div class="line">    error = raptorHandle.<a class="code" href="class_h_a_p_t_i_o_n_1_1_raptor_a_p_i.html#ad97bcd2322fb21fbaec3f8bb62d97d4b">ReadState</a>(timeStamp, 1U);</div>
<div class="line">    </div>
<div class="line">    <span class="comment">// Perform needed activities</span></div>
<div class="line">    </div>
<div class="line">    <span class="comment">// Call HAPTION::RaptorAPI::SendSetpoints()</span></div>
<div class="line">    error = raptorHandle.<a class="code" href="class_h_a_p_t_i_o_n_1_1_raptor_a_p_i.html#aa5626a4cc27dbe0cb75c2e6c0b5c2532">SendSetpoints</a>();</div>
<div class="line">}</div>
<div class="line"><span class="keywordflow">while</span> (<span class="keyword">true</span>);</div>
</div><!-- fragment --><p>Please note:</p><ul>
<li>The time-stamp delivered by <a class="el" href="class_h_a_p_t_i_o_n_1_1_raptor_a_p_i.html#ad97bcd2322fb21fbaec3f8bb62d97d4b" title="Perform state update.">HAPTION::RaptorAPI::ReadState()</a> corresponds to that of the last received status from the device. You can measure the age of the information by comparing with std::chrono::system_clock::now().</li>
<li>The call to <a class="el" href="class_h_a_p_t_i_o_n_1_1_raptor_a_p_i.html#ad97bcd2322fb21fbaec3f8bb62d97d4b" title="Perform state update.">HAPTION::RaptorAPI::ReadState()</a> is mandatory for updating the device state (joint angles, Cartesian pose, buttons, etc.).</li>
<li>In case the function <a class="el" href="class_h_a_p_t_i_o_n_1_1_raptor_a_p_i.html#aa5626a4cc27dbe0cb75c2e6c0b5c2532" title="Perform setpoint update.">HAPTION::RaptorAPI::SendSetpoints()</a> does not get called for a duration of more than 30 milliseconds, then the device will disconnect (software watchdog).</li>
</ul>
<h2><a class="anchor" id="parameters"></a>
Setting the device parameters</h2>
<p>Probably the first parameter you want to set is the position and orientation of the coordinate system for Cartesian space. This is done by calling <a class="el" href="class_h_a_p_t_i_o_n_1_1_raptor_a_p_i.html#adeabc6bf0215aa22c26676a80ac74a06" title="Set the base transformation.">HAPTION::RaptorAPI::ChangeBase()</a>. The value should reflect the position of the device with respect to the operator. For example, if the operator is seated in a chair and the device is placed 30 degrees right of the chair, then the coordinate system should be rotated by -30 degrees along Z.</p>
<p>This is a good place to introduce the structure <a class="el" href="struct_h_a_p_t_i_o_n_1_1_displacement.html" title="Simple Displacement.">HAPTION::Displacement</a>. A Displacement represents a transformation in space, and is noted as a translation (three values X/Y/Z in meters) and a rotation (as a unit quaternion). The code for rotating the device by -30 degrees on Z is therefore:</p>
<div class="fragment"><div class="line"><span class="comment">// Initialize Displacement with identity</span></div>
<div class="line"><a class="code" href="struct_h_a_p_t_i_o_n_1_1_displacement.html">HAPTION::Displacement</a> base = { 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 1.0f };</div>
<div class="line"><span class="comment">// Create rotation on Z</span></div>
<div class="line">base.<a class="code" href="struct_h_a_p_t_i_o_n_1_1_displacement.html#aa73ed7d893ee35709140a960a534aea8">q_z</a> = -sin(0.5f(30.0f*M_PI/180.0f));</div>
<div class="line">base.<a class="code" href="struct_h_a_p_t_i_o_n_1_1_displacement.html#a36d60c436cb2f658d8ae88a118ee0a1d">q_w</a> = cos(0.5f(30.0f*M_PI/180.0f));</div>
<div class="line"><span class="comment">// Apply transformation</span></div>
<div class="line">raptorHandle.<a class="code" href="class_h_a_p_t_i_o_n_1_1_raptor_a_p_i.html#adeabc6bf0215aa22c26676a80ac74a06">ChangeBase</a>(base);</div>
<div class="ttc" id="aclass_h_a_p_t_i_o_n_1_1_raptor_a_p_i_html_adeabc6bf0215aa22c26676a80ac74a06"><div class="ttname"><a href="class_h_a_p_t_i_o_n_1_1_raptor_a_p_i.html#adeabc6bf0215aa22c26676a80ac74a06">HAPTION::RaptorAPI::ChangeBase</a></div><div class="ttdeci">ErrorCode ChangeBase(Displacement const &amp;iDisp) noexcept</div><div class="ttdoc">Set the base transformation.</div></div>
<div class="ttc" id="astruct_h_a_p_t_i_o_n_1_1_displacement_html"><div class="ttname"><a href="struct_h_a_p_t_i_o_n_1_1_displacement.html">HAPTION::Displacement</a></div><div class="ttdoc">Simple Displacement.</div><div class="ttdef"><b>Definition:</b> RobotTypes.hpp:23</div></div>
<div class="ttc" id="astruct_h_a_p_t_i_o_n_1_1_displacement_html_a36d60c436cb2f658d8ae88a118ee0a1d"><div class="ttname"><a href="struct_h_a_p_t_i_o_n_1_1_displacement.html#a36d60c436cb2f658d8ae88a118ee0a1d">HAPTION::Displacement::q_w</a></div><div class="ttdeci">float32_t q_w</div><div class="ttdoc">Scalar value of the orientation quaternion.</div><div class="ttdef"><b>Definition:</b> RobotTypes.hpp:38</div></div>
<div class="ttc" id="astruct_h_a_p_t_i_o_n_1_1_displacement_html_aa73ed7d893ee35709140a960a534aea8"><div class="ttname"><a href="struct_h_a_p_t_i_o_n_1_1_displacement.html#aa73ed7d893ee35709140a960a534aea8">HAPTION::Displacement::q_z</a></div><div class="ttdeci">float32_t q_z</div><div class="ttdoc">&quot;k&quot; value of the orientation quaternion</div><div class="ttdef"><b>Definition:</b> RobotTypes.hpp:36</div></div>
</div><!-- fragment --><p>After executing that code, the coordinate system for Cartesian space will be: X horizontal towards the operator, Y horizontal to the right, Z vertical upwards. The method <a class="el" href="class_h_a_p_t_i_o_n_1_1_raptor_a_p_i.html#adeabc6bf0215aa22c26676a80ac74a06" title="Set the base transformation.">HAPTION::RaptorAPI::ChangeBase()</a> should be called early in the code, and in any case before a call to <a class="el" href="class_h_a_p_t_i_o_n_1_1_raptor_a_p_i.html#a51934ba613594887a7e7c099ae017ffb" title="Start Cartesian position control mode.">HAPTION::RaptorAPI::StartCartesianPositionMode()</a> or <a class="el" href="class_h_a_p_t_i_o_n_1_1_raptor_a_p_i.html#adfa5f08c344a1c09eccf680b532a1760" title="Start joint position control mode.">HAPTION::RaptorAPI::StartJointPositionMode</a>.</p>
<p>The method <a class="el" href="class_h_a_p_t_i_o_n_1_1_raptor_a_p_i.html#af9eafe7707638c8774f28343541023ef" title="Set the viewpoint transformation.">HAPTION::RaptorAPI::ChangeViewpoint()</a> enables you to modify the coordinate system further, even while the device is active. It is typically used for rotating the coordinate system so that it is coherent with the camera view of the remote environment. If the camera is moving, or if the remote-controlled robot is on a moving crane, you should use <a class="el" href="class_h_a_p_t_i_o_n_1_1_raptor_a_p_i.html#a2e1c7c0ce0654e379c7627caa5a0c1df" title="Change continuously the viewpoint transformation (this might generate forces!).">HAPTION::RaptorAPI::MoveViewpoint()</a> instead, in order to compensate to the moving speed.</p>
<p>You can also change the scale of movement, by calling the method <a class="el" href="class_h_a_p_t_i_o_n_1_1_raptor_a_p_i.html#a7eb11692fa434ad96b999dbbe6ecb087" title="Change movement scaling.">HAPTION::RaptorAPI::ChangeMovementScale</a>. It takes two parameters, i.e. the scale factors in translation and in rotation. A factor above 1 will result in larger changes of the Cartesian pose for a movement applied by the operator to the handle of the device. Symmetrically, a factor below 1 will result in smaller changes of the Cartesian pose. Please note that the scaling of rotations tends to create strange effects, and especially a factor above 1 can render the system difficult to control.</p>
<h2><a class="anchor" id="state"></a>
Reading the device state</h2>
<p>In order to update the device state, you need to call the method <a class="el" href="class_h_a_p_t_i_o_n_1_1_raptor_a_p_i.html#ad97bcd2322fb21fbaec3f8bb62d97d4b" title="Perform state update.">HAPTION::RaptorAPI::ReadState</a> at the beginning of each periodic loop. The return parameter, of type std::chrono::time_point&lt;std::chrono::system_clock&gt;, gives the timestamp of the last information actually received from the device, to be compared to std::chrono::system_clock::now() in order to compute the age of the data.</p>
<p>The state of the device is accessed by the methods starting with "Get": </p><ul>
<li>
<a class="el" href="class_h_a_p_t_i_o_n_1_1_raptor_a_p_i.html#a227eea3581a66dd49f16ab2a983152ca" title="Get the calibration status of the device.">HAPTION::RaptorAPI::GetCalibrationStatus</a> : calibration status of the device </li>
<li>
<a class="el" href="class_h_a_p_t_i_o_n_1_1_raptor_a_p_i.html#a80b7d5d3848d43ce07111d404b46c7b7" title="Get the current (relative) Cartesian pose.">HAPTION::RaptorAPI::GetCartesianPose</a> : current Cartesian pose (as Displacement or transformation matrix) </li>
<li>
<a class="el" href="class_h_a_p_t_i_o_n_1_1_raptor_a_p_i.html#a1a395f3b5f000c6fd339ae42b7a75e25" title="Get the current (relative) Cartesian speed.">HAPTION::RaptorAPI::GetCartesianSpeed</a> : current Cartesian speed </li>
<li>
<a class="el" href="class_h_a_p_t_i_o_n_1_1_raptor_a_p_i.html#a971ea62814a203f1584eaf885ca5ff42" title="Get the current joint angles.">HAPTION::RaptorAPI::GetJointAngles</a> : current joint angles </li>
<li>
<a class="el" href="class_h_a_p_t_i_o_n_1_1_raptor_a_p_i.html#a0009035dd858840d4b510c4821b0cf49" title="Get the current joint speeds.">HAPTION::RaptorAPI::GetJointSpeeds</a> : current joint speeds </li>
<li>
<a class="el" href="class_h_a_p_t_i_o_n_1_1_raptor_a_p_i.html#a61fea9bb484bbbc7a39b326ffaadc478" title="Get the maximum value of the cartesian gains.">HAPTION::RaptorAPI::GetMaxCartesianGains</a> : maximum acceptable Cartesian gains </li>
<li>
<a class="el" href="class_h_a_p_t_i_o_n_1_1_raptor_a_p_i.html#a3c54802388ab689cd085bfa76f2684cc" title="Get the maximum value of the joint gains.">HAPTION::RaptorAPI::GetMaxJointGains</a> : maximum acceptable joint gains </li>
<li>
<a class="el" href="class_h_a_p_t_i_o_n_1_1_raptor_a_p_i.html#a6cbeced9d81efd684aac5a572381ffd8" title="Get the status of the automaton.">HAPTION::RaptorAPI::GetAutomatonStatus</a> : current state of the state machine </li>
<li>
<a class="el" href="class_h_a_p_t_i_o_n_1_1_raptor_a_p_i.html#acbb7591b77f176df6d963d2fe02400c7" title="Get the status of motor power.">HAPTION::RaptorAPI::GetPowerStatus</a> : current status of the motor power supply </li>
<li>
<a class="el" href="class_h_a_p_t_i_o_n_1_1_raptor_a_p_i.html#a77efbcc2d258728d96dd98fac7267d19" title="Get the current clutch offset.">HAPTION::RaptorAPI::GetClutchOffset</a> : current value of the clutch offset </li>
<li>
<a class="el" href="class_h_a_p_t_i_o_n_1_1_raptor_a_p_i.html#a805ac7a7693947d9a76d2b97920e96bf" title="Get the current Cartesian force applied by the device on the operator&#39;s hand.">HAPTION::RaptorAPI::GetCartesianForce</a> : value of the force currently applied by the user on the device </li>
<li>
<a class="el" href="class_h_a_p_t_i_o_n_1_1_raptor_a_p_i.html#a66ad466b68b1a882db5c77bfd67616a7" title="Get the status of an operator button.">HAPTION::RaptorAPI::GetOperatorButton</a> : current status of one push-button or other interaction implement </li>
<li>
<a class="el" href="class_h_a_p_t_i_o_n_1_1_raptor_a_p_i.html#a271235199eebdbcec9f6a98fc3479551" title="Get the value of the trigger device.">HAPTION::RaptorAPI::GetTriggerValue</a>: current value of the trigger </li>
</ul>
<h2><a class="anchor" id="setpoints"></a>
Sending setpoints to the device</h2>
<p>The methods starting with "Set" are used for giving control setpoints. After starting a specific control mode, you should make sure to update the setpoints at every single periodic loop: </p><ul>
<li>
<a class="el" href="class_h_a_p_t_i_o_n_1_1_raptor_a_p_i.html#ae7a8a1e17a08d00c8bbc9884247e2343" title="Set a Cartesian pose setpoint.">HAPTION::RaptorAPI::SetCartesianPose</a> : set the Cartesian pose setpoint (as displacement or transformation matrix) </li>
<li>
<a class="el" href="class_h_a_p_t_i_o_n_1_1_raptor_a_p_i.html#ab03102a1b80dad3002e8ff5c28f4264c" title="Set a Cartesian speed setpoint.">HAPTION::RaptorAPI::SetCartesianSpeed</a> : set the Cartesian speed setpoint </li>
<li>
<a class="el" href="class_h_a_p_t_i_o_n_1_1_raptor_a_p_i.html#a88d1328364c04a4060e8e7d8628aeeb2" title="Add a Cartesian force overlay.">HAPTION::RaptorAPI::AddCartesianForceOverlay</a> : add a force overlay on the current Cartesian setpoint </li>
<li>
<a class="el" href="class_h_a_p_t_i_o_n_1_1_raptor_a_p_i.html#a6b2c1246bb6f8fa5eaa1dc20712663c2" title="Set a joint angle setpoint.">HAPTION::RaptorAPI::SetJointAngles</a> : set the joint angle setpoints </li>
<li>
<a class="el" href="class_h_a_p_t_i_o_n_1_1_raptor_a_p_i.html#a15a03bfb38ff739e8a6b5481ac26d369" title="Set a joint speed setpoint.">HAPTION::RaptorAPI::SetJointSpeeds</a> : set the joint speed setpoints </li>
<li>
<a class="el" href="class_h_a_p_t_i_o_n_1_1_raptor_a_p_i.html#a2ead50ba4cd48c9b7645a5870b278b1b" title="Add a joint torque overlay.">HAPTION::RaptorAPI::AddJointTorqueOverlay</a> : add a torque overlay on the current joint setpoint </li>
</ul>
<p>The "Set" and "Add" methods have no effect on the device unless you call the method <a class="el" href="class_h_a_p_t_i_o_n_1_1_raptor_a_p_i.html#aa5626a4cc27dbe0cb75c2e6c0b5c2532" title="Perform setpoint update.">HAPTION::RaptorAPI::SendSetpoints</a> at the end of each periodic loop.</p>
<p>The methods "Change" are used for changing the behavior of the device. You should call them only when you need to change the behavior, and not at every single periodic loop: </p><ul>
<li>
<a class="el" href="class_h_a_p_t_i_o_n_1_1_raptor_a_p_i.html#adeabc6bf0215aa22c26676a80ac74a06" title="Set the base transformation.">HAPTION::RaptorAPI::ChangeBase</a> : modify the base transformation (as displacement or transformation matrix) </li>
<li>
<a class="el" href="class_h_a_p_t_i_o_n_1_1_raptor_a_p_i.html#af9eafe7707638c8774f28343541023ef" title="Set the viewpoint transformation.">HAPTION::RaptorAPI::ChangeViewpoint</a> : modify the viewpoint transformation (as displacement or transformation matrix) </li>
<li>
<a class="el" href="class_h_a_p_t_i_o_n_1_1_raptor_a_p_i.html#a7eb11692fa434ad96b999dbbe6ecb087" title="Change movement scaling.">HAPTION::RaptorAPI::ChangeMovementScale</a> : modify the movement scaling factors </li>
<li>
<a class="el" href="class_h_a_p_t_i_o_n_1_1_raptor_a_p_i.html#ad449960b217c1eeb6881f17604bb6688" title="Change the Cartesian gains.">HAPTION::RaptorAPI::ChangeCartesianGains</a> : modify the Cartesian control gains </li>
<li>
<a class="el" href="class_h_a_p_t_i_o_n_1_1_raptor_a_p_i.html#ae5cf951c07f3eec5c2d754e20e01bd56" title="Change the joint-space gains.">HAPTION::RaptorAPI::ChangeJointGains</a> : modify the joint control gains </li>
</ul>
<p>For all purposes, you should consider that the effect of the "Change" methods is immediate. As an example, a call to <a class="el" href="class_h_a_p_t_i_o_n_1_1_raptor_a_p_i.html#af9eafe7707638c8774f28343541023ef" title="Set the viewpoint transformation.">HAPTION::RaptorAPI::ChangeViewpoint</a> will modify the result of <a class="el" href="class_h_a_p_t_i_o_n_1_1_raptor_a_p_i.html#a80b7d5d3848d43ce07111d404b46c7b7" title="Get the current (relative) Cartesian pose.">HAPTION::RaptorAPI::GetCartesianPose</a> immediately, whether <a class="el" href="class_h_a_p_t_i_o_n_1_1_raptor_a_p_i.html#aa5626a4cc27dbe0cb75c2e6c0b5c2532" title="Perform setpoint update.">HAPTION::RaptorAPI::SendSetpoints</a> and <a class="el" href="class_h_a_p_t_i_o_n_1_1_raptor_a_p_i.html#ad97bcd2322fb21fbaec3f8bb62d97d4b" title="Perform state update.">HAPTION::RaptorAPI::ReadState</a> have been called inbetween or not.</p>
<h1><a class="anchor" id="RaptorAPIsample"></a>
Complete source code example</h1>
<p>The following code provides a complete, working example of the use of the RaptorAPI. More advanced examples are described in section <a class="el" href="index.html#codesamples">Example test programs</a>.</p>
<p>It simulates a robot, controlled in Cartesian space, which is following the movements of the force-feedback device perfectly but for a drag error in the vertical direction, corresponding to a weight of 1 kg in the gripper.</p>
<p>The code includes a very simple state machine, with two states: </p><ol>
<li>
In the starting state, the robot is blocked on its initial position, and the force-feedback device is free to move. </li>
<li>
In the "bilateral coupling" state, the pose and speed of the force-feeback device are sent to the robot as setpoints, and vice-versa. </li>
</ol>
<p>In order to switch from state 1 to state 2, it is necessary to activate force-feedback (front power button and deadman-switch), and push the left button on the device handle.</p>
<p>In order to switch back from state 2 to state 1, you can push the left button again. Alternatively, releasing the deadman-switch will also cause the state machine to switch back to state 1 immediately.</p>
<div class="fragment"><div class="line"><span class="comment">/*</span></div>
<div class="line"><span class="comment"> * File: RaptorAPISample.cpp</span></div>
<div class="line"><span class="comment"> * Author: Jerome Perret</span></div>
<div class="line"><span class="comment"> * Copyright: Haption SA, 2020</span></div>
<div class="line"><span class="comment"> * Note: Permission granted to copy, modify, redistribute, provided the above copyright is mentioned</span></div>
<div class="line"><span class="comment"> */</span></div>
<div class="line"> </div>
<div class="line"><span class="preprocessor">#include &lt;iostream&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;chrono&gt;</span></div>
<div class="line"> </div>
<div class="line"><span class="comment">// Include the RaptorAPI</span></div>
<div class="line"><span class="preprocessor">#include &quot;<a class="code" href="_raptor_a_p_i_8hpp.html">RaptorAPI.hpp</a>&quot;</span></div>
<div class="line"> </div>
<div class="line"><span class="comment">// Those two variables will be used for simulating a robot</span></div>
<div class="line"><span class="keyword">static</span> <a class="code" href="struct_h_a_p_t_i_o_n_1_1_displacement.html">HAPTION::Displacement</a> g_robotSetpoint{ 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 1.0f };</div>
<div class="line"><span class="keyword">static</span> <a class="code" href="struct_h_a_p_t_i_o_n_1_1_cartesian_vector.html">HAPTION::CartesianVector</a> g_robotSpeed{ 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f };</div>
<div class="line"> </div>
<div class="line"><span class="comment">// This function stands for sending setpoints to the robot</span></div>
<div class="line"><span class="keyword">static</span> <span class="keywordtype">void</span> RobotSetPoseSpeedSetpoint(<a class="code" href="struct_h_a_p_t_i_o_n_1_1_displacement.html">HAPTION::Displacement</a> <span class="keyword">const</span>&amp; iPose, <a class="code" href="struct_h_a_p_t_i_o_n_1_1_cartesian_vector.html">HAPTION::CartesianVector</a> <span class="keyword">const</span>&amp; iSpeed)</div>
<div class="line">{</div>
<div class="line">    <span class="comment">// Just copy the values</span></div>
<div class="line">    g_robotSetpoint = iPose;</div>
<div class="line">    g_robotSpeed = iSpeed;</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="comment">// This function stands for receiving the Cartesian pose and speed of the robot</span></div>
<div class="line"><span class="keyword">static</span> <span class="keywordtype">void</span> RobotGetMeasuredPoseSpeed(<a class="code" href="struct_h_a_p_t_i_o_n_1_1_displacement.html">HAPTION::Displacement</a>&amp; oPose, <a class="code" href="struct_h_a_p_t_i_o_n_1_1_cartesian_vector.html">HAPTION::CartesianVector</a>&amp; oSpeed)</div>
<div class="line">{</div>
<div class="line">    oPose = g_robotSetpoint;</div>
<div class="line">    oSpeed = g_robotSpeed;</div>
<div class="line">    <span class="comment">// Simulate a drag error, caused by an object in the gripper</span></div>
<div class="line">    <span class="comment">// With the values of the gain parameters below, 1 cm drag means 1 kg of weight</span></div>
<div class="line">    oPose.<a class="code" href="struct_h_a_p_t_i_o_n_1_1_displacement.html#a7dafd8a187c4c5ead078e7d3432839bd">t_z</a> -= 0.01f;</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="keywordtype">int</span> main(<span class="keywordtype">int</span> argc, <span class="keywordtype">char</span> **argv)</div>
<div class="line">{</div>
<div class="line">    <span class="comment">// Display syntax if wrong number of parameters</span></div>
<div class="line">    <span class="keywordflow">if</span> (argc != 2)</div>
<div class="line">    {</div>
<div class="line">        std::cout &lt;&lt; <span class="stringliteral">&quot;Syntax: RaptorAPISample &lt;device_config_file&gt;&quot;</span> &lt;&lt; std::endl;</div>
<div class="line">        <span class="keywordflow">return</span> 0;</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="comment">/*</span></div>
<div class="line"><span class="comment">     * Force-feedback device initialization</span></div>
<div class="line"><span class="comment">     */</span></div>
<div class="line"> </div>
<div class="line">    <span class="comment">// Initialize the connection to the device</span></div>
<div class="line">    <a class="code" href="class_h_a_p_t_i_o_n_1_1_raptor_a_p_i.html">HAPTION::RaptorAPI</a> raptorHandle;</div>
<div class="line">    raptorHandle.<a class="code" href="class_h_a_p_t_i_o_n_1_1_raptor_a_p_i.html#a8dd57923b91f7703f32e509b4b1f0f11">DefineSpecificFields</a>(<span class="stringliteral">&quot;channel=SimpleChannelUDP;localport=3131;remoteip=192.168.100.53;remoteport=5000&quot;</span>);</div>
<div class="line">    <a class="code" href="namespace_h_a_p_t_i_o_n.html#a2bc70f945918c02a2321840c292d07c4">HAPTION::ErrorCode</a> error = raptorHandle.<a class="code" href="class_h_a_p_t_i_o_n_1_1_raptor_a_p_i.html#af1c6cf729558de312330b074dcfa919e">Init</a>(argv[1]);</div>
<div class="line">    <span class="keywordflow">if</span> (error != <a class="code" href="namespace_h_a_p_t_i_o_n.html#a2bc70f945918c02a2321840c292d07c4afab94e0fac7e028ed75c31a7c8adc18e">HAPTION::ErrorCode::E_NOERROR</a>)</div>
<div class="line">    {</div>
<div class="line">        std::cerr &lt;&lt; <span class="stringliteral">&quot;HAPTION::RaptorAPI::Init() failed with error &quot;</span> &lt;&lt; (int)error &lt;&lt; std::endl;</div>
<div class="line">        std::cerr &lt;&lt; <span class="stringliteral">&quot;Exiting now!&quot;</span> &lt;&lt; std::endl;</div>
<div class="line">        <span class="keywordflow">return</span> -1;</div>
<div class="line">    }</div>
<div class="line">    <span class="comment">// Display successful connection</span></div>
<div class="line">    std::string robotName{ <span class="stringliteral">&quot;&quot;</span> };</div>
<div class="line">    (void) raptorHandle.<a class="code" href="class_h_a_p_t_i_o_n_1_1_raptor_a_p_i.html#ab3b3b8a24823776d5fd6a57ad2ea62dc">GetFullName</a>(robotName);</div>
<div class="line">    std::cout &lt;&lt; <span class="stringliteral">&quot;Successfully connected to device &quot;</span> &lt;&lt; robotName &lt;&lt; std::endl;</div>
<div class="line">    <a class="code" href="namespace_h_a_p_t_i_o_n.html#aa28c612d2bd3f15964fd9d95a612c1d2">HAPTION::CalibrationStatus</a> status;</div>
<div class="line">    raptorHandle.<a class="code" href="class_h_a_p_t_i_o_n_1_1_raptor_a_p_i.html#a227eea3581a66dd49f16ab2a983152ca">GetCalibrationStatus</a>(status);</div>
<div class="line">    <span class="keywordflow">if</span> (status != <a class="code" href="namespace_h_a_p_t_i_o_n.html#aa28c612d2bd3f15964fd9d95a612c1d2ab74e9b48ff9e648e114e62659d65b457">HAPTION::CalibrationStatus::C_CALIBRATED</a>)</div>
<div class="line">    {</div>
<div class="line">        std::cerr &lt;&lt; <span class="stringliteral">&quot;Please calibrate the device first!&quot;</span> &lt;&lt; std::endl;</div>
<div class="line">        std::cerr &lt;&lt; <span class="stringliteral">&quot;Exiting now!&quot;</span> &lt;&lt; std::endl;</div>
<div class="line">        raptorHandle.<a class="code" href="class_h_a_p_t_i_o_n_1_1_raptor_a_p_i.html#a7d11007a80f47fa5627861daaae27bd6">Close</a>();</div>
<div class="line">        <span class="keywordflow">return</span> -1;</div>
<div class="line">    }</div>
<div class="line">    <span class="comment">// Perform a first ReadState() to update the local device state</span></div>
<div class="line">    std::chrono::time_point&lt;std::chrono::system_clock&gt; timeStamp;</div>
<div class="line">    error = raptorHandle.<a class="code" href="class_h_a_p_t_i_o_n_1_1_raptor_a_p_i.html#ad97bcd2322fb21fbaec3f8bb62d97d4b">ReadState</a>(timeStamp);</div>
<div class="line">    <span class="keywordflow">if</span> (error != <a class="code" href="namespace_h_a_p_t_i_o_n.html#a2bc70f945918c02a2321840c292d07c4afab94e0fac7e028ed75c31a7c8adc18e">HAPTION::ErrorCode::E_NOERROR</a>)</div>
<div class="line">    {</div>
<div class="line">        std::cerr &lt;&lt; <span class="stringliteral">&quot;HAPTION::RaptorAPI::ReadState() failed with error &quot;</span> &lt;&lt; (int)error &lt;&lt; std::endl;</div>
<div class="line">        std::cerr &lt;&lt; <span class="stringliteral">&quot;Exiting now!&quot;</span> &lt;&lt; std::endl;</div>
<div class="line">        (void) raptorHandle.<a class="code" href="class_h_a_p_t_i_o_n_1_1_raptor_a_p_i.html#a7d11007a80f47fa5627861daaae27bd6">Close</a>();</div>
<div class="line">        <span class="keywordflow">return</span> -1;</div>
<div class="line">    }</div>
<div class="line">    <span class="comment">// Authorize force-feedback</span></div>
<div class="line">    error = raptorHandle.<a class="code" href="class_h_a_p_t_i_o_n_1_1_raptor_a_p_i.html#a34aab8ce513627579cc36dcc4d904d09">ActivateForceFeedback</a>(<span class="keyword">true</span>);</div>
<div class="line">    <span class="keywordflow">if</span> (error != <a class="code" href="namespace_h_a_p_t_i_o_n.html#a2bc70f945918c02a2321840c292d07c4afab94e0fac7e028ed75c31a7c8adc18e">HAPTION::ErrorCode::E_NOERROR</a>)</div>
<div class="line">    {</div>
<div class="line">        std::cerr &lt;&lt; <span class="stringliteral">&quot;HAPTION::RaptorAPI::ActivateForceFeedback() failed with error &quot;</span> &lt;&lt; (int)error &lt;&lt; std::endl;</div>
<div class="line">        std::cerr &lt;&lt; <span class="stringliteral">&quot;Exiting now!&quot;</span> &lt;&lt; std::endl;</div>
<div class="line">        (void)raptorHandle.<a class="code" href="class_h_a_p_t_i_o_n_1_1_raptor_a_p_i.html#a7d11007a80f47fa5627861daaae27bd6">Close</a>();</div>
<div class="line">        <span class="keywordflow">return</span> -1;</div>
<div class="line">    }</div>
<div class="line">    <span class="comment">// Switch to Cartesian mode</span></div>
<div class="line">    error = raptorHandle.<a class="code" href="class_h_a_p_t_i_o_n_1_1_raptor_a_p_i.html#a51934ba613594887a7e7c099ae017ffb">StartCartesianPositionMode</a>();</div>
<div class="line">    <span class="keywordflow">if</span> (error != <a class="code" href="namespace_h_a_p_t_i_o_n.html#a2bc70f945918c02a2321840c292d07c4afab94e0fac7e028ed75c31a7c8adc18e">HAPTION::ErrorCode::E_NOERROR</a>)</div>
<div class="line">    {</div>
<div class="line">        std::cerr &lt;&lt; <span class="stringliteral">&quot;HAPTION::RaptorAPI::StartCartesianPositionMode() failed with error &quot;</span> &lt;&lt; (int)error &lt;&lt; std::endl;</div>
<div class="line">        std::cerr &lt;&lt; <span class="stringliteral">&quot;Exiting now!&quot;</span> &lt;&lt; std::endl;</div>
<div class="line">        (void)raptorHandle.<a class="code" href="class_h_a_p_t_i_o_n_1_1_raptor_a_p_i.html#a7d11007a80f47fa5627861daaae27bd6">Close</a>();</div>
<div class="line">        <span class="keywordflow">return</span> -1;</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="comment">/*</span></div>
<div class="line"><span class="comment">     * Robot initialization</span></div>
<div class="line"><span class="comment">     */</span></div>
<div class="line"> </div>
<div class="line">    <span class="comment">// Initialize the control pose and speed of the robot</span></div>
<div class="line">    <a class="code" href="struct_h_a_p_t_i_o_n_1_1_displacement.html">HAPTION::Displacement</a> robotPoseSetpoint;</div>
<div class="line">    <a class="code" href="struct_h_a_p_t_i_o_n_1_1_cartesian_vector.html">HAPTION::CartesianVector</a> robotSpeedSetpoint;</div>
<div class="line">    RobotGetMeasuredPoseSpeed(robotPoseSetpoint, robotSpeedSetpoint);</div>
<div class="line"> </div>
<div class="line">    <span class="comment">/*</span></div>
<div class="line"><span class="comment">     * Periodic loop</span></div>
<div class="line"><span class="comment">     */</span></div>
<div class="line"> </div>
<div class="line">    <span class="comment">// This is the current state of bilateral coupling</span></div>
<div class="line">    <span class="keywordtype">bool</span> isCouplingActive = <span class="keyword">false</span>;</div>
<div class="line"> </div>
<div class="line">    <span class="comment">// This is the last state of the left button (for detecting push event)</span></div>
<div class="line">    <span class="keywordtype">bool</span> prevLeftButton = <span class="keyword">false</span>;</div>
<div class="line"> </div>
<div class="line">    <span class="comment">// This is the time-stamp of the last loop</span></div>
<div class="line">    <span class="keyword">auto</span> lastStep = std::chrono::system_clock::now();</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">do</span></div>
<div class="line">    {</div>
<div class="line">        <span class="comment">// Call HAPTION::RaptorAPI::ReadState()</span></div>
<div class="line">        error = raptorHandle.<a class="code" href="class_h_a_p_t_i_o_n_1_1_raptor_a_p_i.html#ad97bcd2322fb21fbaec3f8bb62d97d4b">ReadState</a>(timeStamp);</div>
<div class="line">        <span class="keywordflow">if</span> (error != <a class="code" href="namespace_h_a_p_t_i_o_n.html#a2bc70f945918c02a2321840c292d07c4afab94e0fac7e028ed75c31a7c8adc18e">HAPTION::ErrorCode::E_NOERROR</a>)</div>
<div class="line">        {</div>
<div class="line">            std::cerr &lt;&lt; <span class="stringliteral">&quot;HAPTION::RaptorAPI::ReadState() failed with error &quot;</span> &lt;&lt; (int)error &lt;&lt; std::endl;</div>
<div class="line">            std::cerr &lt;&lt; <span class="stringliteral">&quot;Exiting now!&quot;</span> &lt;&lt; std::endl;</div>
<div class="line">            <span class="keywordflow">break</span>;</div>
<div class="line">        }</div>
<div class="line"> </div>
<div class="line">        <span class="comment">// Test push event on left button</span></div>
<div class="line">        <span class="keywordtype">bool</span> leftButton = <span class="keyword">false</span>, leftEvent = <span class="keyword">false</span>;</div>
<div class="line">        raptorHandle.<a class="code" href="class_h_a_p_t_i_o_n_1_1_raptor_a_p_i.html#a66ad466b68b1a882db5c77bfd67616a7">GetOperatorButton</a>(<a class="code" href="namespace_h_a_p_t_i_o_n.html#af6fa0bbb639b61dbf3f82182ccaf4fdba86df3a25b55c60d49f90c2582212c1be">HAPTION::OperatorButton::B_LEFT</a>, leftButton);</div>
<div class="line">        <span class="keywordflow">if</span> (leftButton &amp;&amp; !prevLeftButton)</div>
<div class="line">        {</div>
<div class="line">            leftEvent = <span class="keyword">true</span>;</div>
<div class="line">        }</div>
<div class="line">        prevLeftButton = leftButton;</div>
<div class="line"> </div>
<div class="line">        <span class="comment">// Get status of force-feedback</span></div>
<div class="line">        <a class="code" href="namespace_h_a_p_t_i_o_n.html#a4e7bb2b529c2862358f2b1a3b636cbdf">HAPTION::PowerStatus</a> powerStatus;</div>
<div class="line">        raptorHandle.<a class="code" href="class_h_a_p_t_i_o_n_1_1_raptor_a_p_i.html#acbb7591b77f176df6d963d2fe02400c7">GetPowerStatus</a>(powerStatus);</div>
<div class="line"> </div>
<div class="line">        <span class="comment">// Get the current pose and speed of the robot</span></div>
<div class="line">        <a class="code" href="struct_h_a_p_t_i_o_n_1_1_displacement.html">HAPTION::Displacement</a> robotPose;</div>
<div class="line">        <a class="code" href="struct_h_a_p_t_i_o_n_1_1_cartesian_vector.html">HAPTION::CartesianVector</a> robotSpeed;</div>
<div class="line">        RobotGetMeasuredPoseSpeed(robotPose, robotSpeed);</div>
<div class="line"> </div>
<div class="line">        <span class="comment">// Get the current pose and speed of the force-feedback device</span></div>
<div class="line">        <a class="code" href="struct_h_a_p_t_i_o_n_1_1_displacement.html">HAPTION::Displacement</a> manipPose;</div>
<div class="line">        <a class="code" href="struct_h_a_p_t_i_o_n_1_1_cartesian_vector.html">HAPTION::CartesianVector</a> manipSpeed;</div>
<div class="line">        (void)raptorHandle.<a class="code" href="class_h_a_p_t_i_o_n_1_1_raptor_a_p_i.html#a80b7d5d3848d43ce07111d404b46c7b7">GetCartesianPose</a>(manipPose);</div>
<div class="line">        (void)raptorHandle.<a class="code" href="class_h_a_p_t_i_o_n_1_1_raptor_a_p_i.html#a1a395f3b5f000c6fd339ae42b7a75e25">GetCartesianSpeed</a>(manipSpeed);</div>
<div class="line"> </div>
<div class="line">        <span class="comment">// Bilateral coupling is active</span></div>
<div class="line">        <span class="keywordflow">if</span> (isCouplingActive)</div>
<div class="line">        {</div>
<div class="line">            <span class="comment">// Copy the force-feedback device&#39;s pose and speed to the robot setpoints</span></div>
<div class="line">            robotPoseSetpoint = manipPose;</div>
<div class="line">            robotSpeedSetpoint = manipSpeed;</div>
<div class="line">            RobotSetPoseSpeedSetpoint(robotPoseSetpoint, robotSpeedSetpoint);</div>
<div class="line"> </div>
<div class="line">            <span class="comment">// Send the robot pose and speed to the force-feedback device as setpoints</span></div>
<div class="line">            raptorHandle.<a class="code" href="class_h_a_p_t_i_o_n_1_1_raptor_a_p_i.html#ae7a8a1e17a08d00c8bbc9884247e2343">SetCartesianPose</a>(robotPose);</div>
<div class="line">            raptorHandle.<a class="code" href="class_h_a_p_t_i_o_n_1_1_raptor_a_p_i.html#ab03102a1b80dad3002e8ff5c28f4264c">SetCartesianSpeed</a>(robotSpeed);</div>
<div class="line"> </div>
<div class="line">            <span class="comment">// If left button has been pushed or power has been lost, then stop the bilateral coupling</span></div>
<div class="line">            <span class="keywordflow">if</span> (leftEvent || (powerStatus != <a class="code" href="namespace_h_a_p_t_i_o_n.html#a4e7bb2b529c2862358f2b1a3b636cbdfa46a5d8c08537cf34f420493846d51d94">HAPTION::PowerStatus::P_POWER_DISINHIBITED</a>))</div>
<div class="line">            {</div>
<div class="line">                std::cout &lt;&lt; <span class="stringliteral">&quot;Bilateral coupling now stopped!&quot;</span> &lt;&lt; std::endl;</div>
<div class="line">                isCouplingActive = <span class="keyword">false</span>;</div>
<div class="line">            }</div>
<div class="line">        }</div>
<div class="line">        <span class="comment">// Bilateral coupling is not active</span></div>
<div class="line">        <span class="keywordflow">else</span></div>
<div class="line">        {</div>
<div class="line">            <span class="comment">// Keep the pose setpoint of the robot, and send a null speed setpoint</span></div>
<div class="line">            robotSpeedSetpoint = { 0.0f, 0.0f, 0.0f, 0.0f, 0.0f, 0.0f };</div>
<div class="line">            RobotSetPoseSpeedSetpoint(robotPoseSetpoint, robotSpeedSetpoint);</div>
<div class="line"> </div>
<div class="line">            <span class="comment">// Send the force-feedback device pose and speed back as setpoints (transparent mode)</span></div>
<div class="line">            raptorHandle.<a class="code" href="class_h_a_p_t_i_o_n_1_1_raptor_a_p_i.html#ae7a8a1e17a08d00c8bbc9884247e2343">SetCartesianPose</a>(manipPose);</div>
<div class="line">            raptorHandle.<a class="code" href="class_h_a_p_t_i_o_n_1_1_raptor_a_p_i.html#ab03102a1b80dad3002e8ff5c28f4264c">SetCartesianSpeed</a>(manipSpeed);</div>
<div class="line"> </div>
<div class="line">            <span class="comment">// If left button has been pushed and we have power, then start the bilateral coupling</span></div>
<div class="line">            <span class="keywordflow">if</span> (leftEvent &amp;&amp; (powerStatus == <a class="code" href="namespace_h_a_p_t_i_o_n.html#a4e7bb2b529c2862358f2b1a3b636cbdfa46a5d8c08537cf34f420493846d51d94">HAPTION::PowerStatus::P_POWER_DISINHIBITED</a>))</div>
<div class="line">            {</div>
<div class="line">                <span class="comment">// Set the Cartesian control gains: 1000 N/m in translation, 10 Nm/rad in rotation, damping 1%</span></div>
<div class="line">                error = raptorHandle.<a class="code" href="class_h_a_p_t_i_o_n_1_1_raptor_a_p_i.html#ad449960b217c1eeb6881f17604bb6688">ChangeCartesianGains</a>(1000.0f, 10.0f, 10.0f, 0.1f);</div>
<div class="line">                <span class="keywordflow">if</span> (error != <a class="code" href="namespace_h_a_p_t_i_o_n.html#a2bc70f945918c02a2321840c292d07c4afab94e0fac7e028ed75c31a7c8adc18e">HAPTION::ErrorCode::E_NOERROR</a>)</div>
<div class="line">                {</div>
<div class="line">                    std::cerr &lt;&lt; <span class="stringliteral">&quot;HAPTION::RaptorAPI::ChangeCartesianGains() failed with error &quot;</span> &lt;&lt; (int)error &lt;&lt; std::endl;</div>
<div class="line">                    <span class="keywordflow">break</span>;</div>
<div class="line">                }</div>
<div class="line">                <span class="comment">// Force the clutch offset to avoid a jerk</span></div>
<div class="line">                error = raptorHandle.<a class="code" href="class_h_a_p_t_i_o_n_1_1_raptor_a_p_i.html#a5f8336ebf722018300a8681111226910">ForceCartesianPose</a>(robotPose);</div>
<div class="line">                <span class="keywordflow">if</span> (error != <a class="code" href="namespace_h_a_p_t_i_o_n.html#a2bc70f945918c02a2321840c292d07c4afab94e0fac7e028ed75c31a7c8adc18e">HAPTION::ErrorCode::E_NOERROR</a>)</div>
<div class="line">                {</div>
<div class="line">                    std::cerr &lt;&lt; <span class="stringliteral">&quot;HAPTION::RaptorAPI::ForceCartesianPose() failed with error &quot;</span> &lt;&lt; (int)error &lt;&lt; std::endl;</div>
<div class="line">                    <span class="keywordflow">break</span>;</div>
<div class="line">                }</div>
<div class="line">                std::cout &lt;&lt; <span class="stringliteral">&quot;Bilateral coupling now active!&quot;</span> &lt;&lt; std::endl;</div>
<div class="line">                isCouplingActive = <span class="keyword">true</span>;</div>
<div class="line">            }</div>
<div class="line">        }</div>
<div class="line"> </div>
<div class="line">        <span class="comment">// Call HAPTION::RaptorAPI::SendSetpoints()</span></div>
<div class="line">        error = raptorHandle.<a class="code" href="class_h_a_p_t_i_o_n_1_1_raptor_a_p_i.html#aa5626a4cc27dbe0cb75c2e6c0b5c2532">SendSetpoints</a>();</div>
<div class="line">        <span class="keywordflow">if</span> (error != <a class="code" href="namespace_h_a_p_t_i_o_n.html#a2bc70f945918c02a2321840c292d07c4afab94e0fac7e028ed75c31a7c8adc18e">HAPTION::ErrorCode::E_NOERROR</a>)</div>
<div class="line">        {</div>
<div class="line">            std::cerr &lt;&lt; <span class="stringliteral">&quot;HAPTION::RaptorAPI::SendSetpoints() failed with error &quot;</span> &lt;&lt; (int)error &lt;&lt; std::endl;</div>
<div class="line">            <span class="keywordflow">break</span>;</div>
<div class="line">        }</div>
<div class="line"> </div>
<div class="line">        <span class="comment">// Enter busy-wait</span></div>
<div class="line">        <span class="keywordflow">while</span> (<span class="keyword">true</span>)</div>
<div class="line">        {</div>
<div class="line">            <span class="comment">// Get current time</span></div>
<div class="line">            <span class="keyword">auto</span> now = std::chrono::system_clock::now();</div>
<div class="line">            <span class="comment">// Compute duration since last loop in microseconds</span></div>
<div class="line">            <span class="keyword">auto</span> duration = std::chrono::duration_cast&lt;std::chrono::microseconds&gt;(now - lastStep).count();</div>
<div class="line">            <span class="comment">// Exit when one millisecond has been reached</span></div>
<div class="line">            <span class="keywordflow">if</span> (duration &gt; 1000)</div>
<div class="line">            {</div>
<div class="line">                lastStep = now;</div>
<div class="line">                <span class="keywordflow">break</span>;</div>
<div class="line">            }</div>
<div class="line">        }</div>
<div class="line"> </div>
<div class="line">        <span class="comment">// Push right button to exit</span></div>
<div class="line">        <span class="keywordtype">bool</span> rightButton = <span class="keyword">false</span>;</div>
<div class="line">        raptorHandle.<a class="code" href="class_h_a_p_t_i_o_n_1_1_raptor_a_p_i.html#a66ad466b68b1a882db5c77bfd67616a7">GetOperatorButton</a>(<a class="code" href="namespace_h_a_p_t_i_o_n.html#af6fa0bbb639b61dbf3f82182ccaf4fdbab3b3aec7628ea7281ce09a3f7b51a7cf">HAPTION::OperatorButton::B_RIGHT</a>, rightButton);</div>
<div class="line">        <span class="keywordflow">if</span> (rightButton)</div>
<div class="line">        {</div>
<div class="line">            <span class="keywordflow">break</span>;</div>
<div class="line">        }</div>
<div class="line">    } <span class="keywordflow">while</span> (<span class="keyword">true</span>);</div>
<div class="line"> </div>
<div class="line">    <span class="comment">// Close down</span></div>
<div class="line">    (void) raptorHandle.<a class="code" href="class_h_a_p_t_i_o_n_1_1_raptor_a_p_i.html#a7d11007a80f47fa5627861daaae27bd6">Close</a>();</div>
<div class="line">    std::cerr &lt;&lt; <span class="stringliteral">&quot;Exiting now!&quot;</span> &lt;&lt; std::endl;</div>
<div class="line">    <span class="keywordflow">return</span> 0;</div>
<div class="line">}</div>
<div class="ttc" id="a_raptor_a_p_i_8hpp_html"><div class="ttname"><a href="_raptor_a_p_i_8hpp.html">RaptorAPI.hpp</a></div></div>
<div class="ttc" id="aclass_h_a_p_t_i_o_n_1_1_raptor_a_p_i_html_a1a395f3b5f000c6fd339ae42b7a75e25"><div class="ttname"><a href="class_h_a_p_t_i_o_n_1_1_raptor_a_p_i.html#a1a395f3b5f000c6fd339ae42b7a75e25">HAPTION::RaptorAPI::GetCartesianSpeed</a></div><div class="ttdeci">ErrorCode GetCartesianSpeed(CartesianVector &amp;oSpeed) noexcept</div><div class="ttdoc">Get the current (relative) Cartesian speed.</div></div>
<div class="ttc" id="aclass_h_a_p_t_i_o_n_1_1_raptor_a_p_i_html_a51934ba613594887a7e7c099ae017ffb"><div class="ttname"><a href="class_h_a_p_t_i_o_n_1_1_raptor_a_p_i.html#a51934ba613594887a7e7c099ae017ffb">HAPTION::RaptorAPI::StartCartesianPositionMode</a></div><div class="ttdeci">ErrorCode StartCartesianPositionMode() noexcept</div><div class="ttdoc">Start Cartesian position control mode.</div></div>
<div class="ttc" id="aclass_h_a_p_t_i_o_n_1_1_raptor_a_p_i_html_a5f8336ebf722018300a8681111226910"><div class="ttname"><a href="class_h_a_p_t_i_o_n_1_1_raptor_a_p_i.html#a5f8336ebf722018300a8681111226910">HAPTION::RaptorAPI::ForceCartesianPose</a></div><div class="ttdeci">ErrorCode ForceCartesianPose(Displacement const &amp;iPose) noexcept</div><div class="ttdoc">Force the current Cartesian pose, overwriting the clutch offset.</div></div>
<div class="ttc" id="aclass_h_a_p_t_i_o_n_1_1_raptor_a_p_i_html_a66ad466b68b1a882db5c77bfd67616a7"><div class="ttname"><a href="class_h_a_p_t_i_o_n_1_1_raptor_a_p_i.html#a66ad466b68b1a882db5c77bfd67616a7">HAPTION::RaptorAPI::GetOperatorButton</a></div><div class="ttdeci">ErrorCode GetOperatorButton(OperatorButton const iButton, bool &amp;oButtonState) noexcept</div><div class="ttdoc">Get the status of an operator button.</div></div>
<div class="ttc" id="aclass_h_a_p_t_i_o_n_1_1_raptor_a_p_i_html_a7d11007a80f47fa5627861daaae27bd6"><div class="ttname"><a href="class_h_a_p_t_i_o_n_1_1_raptor_a_p_i.html#a7d11007a80f47fa5627861daaae27bd6">HAPTION::RaptorAPI::Close</a></div><div class="ttdeci">ErrorCode Close() noexcept</div><div class="ttdoc">Close the connection and terminate.</div></div>
<div class="ttc" id="aclass_h_a_p_t_i_o_n_1_1_raptor_a_p_i_html_a80b7d5d3848d43ce07111d404b46c7b7"><div class="ttname"><a href="class_h_a_p_t_i_o_n_1_1_raptor_a_p_i.html#a80b7d5d3848d43ce07111d404b46c7b7">HAPTION::RaptorAPI::GetCartesianPose</a></div><div class="ttdeci">ErrorCode GetCartesianPose(Displacement &amp;oPose) noexcept</div><div class="ttdoc">Get the current (relative) Cartesian pose.</div></div>
<div class="ttc" id="aclass_h_a_p_t_i_o_n_1_1_raptor_a_p_i_html_ab03102a1b80dad3002e8ff5c28f4264c"><div class="ttname"><a href="class_h_a_p_t_i_o_n_1_1_raptor_a_p_i.html#ab03102a1b80dad3002e8ff5c28f4264c">HAPTION::RaptorAPI::SetCartesianSpeed</a></div><div class="ttdeci">ErrorCode SetCartesianSpeed(CartesianVector const &amp;iSpeed) noexcept</div><div class="ttdoc">Set a Cartesian speed setpoint.</div></div>
<div class="ttc" id="aclass_h_a_p_t_i_o_n_1_1_raptor_a_p_i_html_ab3b3b8a24823776d5fd6a57ad2ea62dc"><div class="ttname"><a href="class_h_a_p_t_i_o_n_1_1_raptor_a_p_i.html#ab3b3b8a24823776d5fd6a57ad2ea62dc">HAPTION::RaptorAPI::GetFullName</a></div><div class="ttdeci">ErrorCode GetFullName(std::string &amp;oName) noexcept</div><div class="ttdoc">Get device full name.</div></div>
<div class="ttc" id="aclass_h_a_p_t_i_o_n_1_1_raptor_a_p_i_html_acbb7591b77f176df6d963d2fe02400c7"><div class="ttname"><a href="class_h_a_p_t_i_o_n_1_1_raptor_a_p_i.html#acbb7591b77f176df6d963d2fe02400c7">HAPTION::RaptorAPI::GetPowerStatus</a></div><div class="ttdeci">ErrorCode GetPowerStatus(PowerStatus &amp;oPowerStatus) noexcept</div><div class="ttdoc">Get the status of motor power.</div></div>
<div class="ttc" id="aclass_h_a_p_t_i_o_n_1_1_raptor_a_p_i_html_ad449960b217c1eeb6881f17604bb6688"><div class="ttname"><a href="class_h_a_p_t_i_o_n_1_1_raptor_a_p_i.html#ad449960b217c1eeb6881f17604bb6688">HAPTION::RaptorAPI::ChangeCartesianGains</a></div><div class="ttdeci">ErrorCode ChangeCartesianGains(float32_t iKT, float32_t iBT, float32_t iKR, float32_t iBR) noexcept</div><div class="ttdoc">Change the Cartesian gains.</div></div>
<div class="ttc" id="aclass_h_a_p_t_i_o_n_1_1_raptor_a_p_i_html_ae7a8a1e17a08d00c8bbc9884247e2343"><div class="ttname"><a href="class_h_a_p_t_i_o_n_1_1_raptor_a_p_i.html#ae7a8a1e17a08d00c8bbc9884247e2343">HAPTION::RaptorAPI::SetCartesianPose</a></div><div class="ttdeci">ErrorCode SetCartesianPose(Displacement const &amp;iPose) noexcept</div><div class="ttdoc">Set a Cartesian pose setpoint.</div></div>
<div class="ttc" id="anamespace_h_a_p_t_i_o_n_html_a4e7bb2b529c2862358f2b1a3b636cbdf"><div class="ttname"><a href="namespace_h_a_p_t_i_o_n.html#a4e7bb2b529c2862358f2b1a3b636cbdf">HAPTION::PowerStatus</a></div><div class="ttdeci">PowerStatus</div><div class="ttdoc">Power status.</div><div class="ttdef"><b>Definition:</b> RobotTypes.hpp:144</div></div>
<div class="ttc" id="anamespace_h_a_p_t_i_o_n_html_a4e7bb2b529c2862358f2b1a3b636cbdfa46a5d8c08537cf34f420493846d51d94"><div class="ttname"><a href="namespace_h_a_p_t_i_o_n.html#a4e7bb2b529c2862358f2b1a3b636cbdfa46a5d8c08537cf34f420493846d51d94">HAPTION::PowerStatus::P_POWER_DISINHIBITED</a></div><div class="ttdeci">@ P_POWER_DISINHIBITED</div><div class="ttdoc">Power on the motor H-bridge, and H-bridge open.</div></div>
<div class="ttc" id="anamespace_h_a_p_t_i_o_n_html_af6fa0bbb639b61dbf3f82182ccaf4fdba86df3a25b55c60d49f90c2582212c1be"><div class="ttname"><a href="namespace_h_a_p_t_i_o_n.html#af6fa0bbb639b61dbf3f82182ccaf4fdba86df3a25b55c60d49f90c2582212c1be">HAPTION::OperatorButton::B_LEFT</a></div><div class="ttdeci">@ B_LEFT</div><div class="ttdoc">Left button on the COBRA handle (true means pushed)</div></div>
<div class="ttc" id="anamespace_h_a_p_t_i_o_n_html_af6fa0bbb639b61dbf3f82182ccaf4fdbab3b3aec7628ea7281ce09a3f7b51a7cf"><div class="ttname"><a href="namespace_h_a_p_t_i_o_n.html#af6fa0bbb639b61dbf3f82182ccaf4fdbab3b3aec7628ea7281ce09a3f7b51a7cf">HAPTION::OperatorButton::B_RIGHT</a></div><div class="ttdeci">@ B_RIGHT</div><div class="ttdoc">Right button on the COBRA handle (true means pushed)</div></div>
<div class="ttc" id="astruct_h_a_p_t_i_o_n_1_1_cartesian_vector_html"><div class="ttname"><a href="struct_h_a_p_t_i_o_n_1_1_cartesian_vector.html">HAPTION::CartesianVector</a></div><div class="ttdoc">Simple Cartesian Vector This is used to store speeds and forces/torques.</div><div class="ttdef"><b>Definition:</b> RobotTypes.hpp:71</div></div>
<div class="ttc" id="astruct_h_a_p_t_i_o_n_1_1_displacement_html_a7dafd8a187c4c5ead078e7d3432839bd"><div class="ttname"><a href="struct_h_a_p_t_i_o_n_1_1_displacement.html#a7dafd8a187c4c5ead078e7d3432839bd">HAPTION::Displacement::t_z</a></div><div class="ttdeci">float32_t t_z</div><div class="ttdoc">Position value on Z in world coordinates, in meters (m)</div><div class="ttdef"><b>Definition:</b> RobotTypes.hpp:30</div></div>
</div><!-- fragment --><h1><a class="anchor" id="virtuoseapi"></a>
Converting code using the VirtuoseAPI to the RaptorAPI</h1>
<h2><a class="anchor" id="introvirtuoseapi"></a>
Introduction</h2>
<p>The VirtuoseAPI is a general-purpose API for accessing Haption force-feedback devices, which has been shipped with all devices since 2002. Although it has a much richer set of functions, it also has some drawbacks, especially for robotic applications, for example:</p><ul>
<li>It introduces an additional latency of about 1 millisecond</li>
<li>It does not expose the clutching offset</li>
<li>It does not expose the position control gains</li>
</ul>
<p>The RaptorAPI is a dedicated API for robotic applications, which overcomes those drawbacks. As a consequence, it is not upward-compatible with the VirtuoseAPI. Therefore, old code written for the VirtuoseAPI needs to be modified. This section gives some directions on how to convert to the RaptorAPI.</p>
<h2><a class="anchor" id="prereqvirtuoseapi"></a>
Prerequisites</h2>
<p>Before starting, you will need to obtain from Haption the configuration file corresponding to your Virtuose device. For that purpose, please contact the Haption support team, giving the serial number of your device. In case you modified the ".hap" configuration file, please send the file as well, so that your modifications can be taken into account.</p>
<p>The configuration file contains parameter values, some of which are encrypted for safety reasons. In case you wish some specific parameters to be customizable (e.g. bit position of the push-buttons on the handle), then please also list them in the same communication.</p>
<h2><a class="anchor" id="adaptingvirtuoseapi"></a>
Adapting your code</h2>
<p>First, you will need to change the header file from "VirtuoseAPI.h" to "RaptorAPI.hpp", and make sure that the new header is visible for your compiler chain.</p>
<p>The next modification is relative to the call to "virtOpen()". When using the VirtuoseAPI, your code connects to the haptic service installed on your computer, and therefore the IP address is "localhost". On the contrary, the RaptorAPI communicates directly with the device, so that you need to provide the IP address of the same. Typically, the following code: </p><div class="fragment"><div class="line">VirtContext VC = virtOpen(<span class="stringliteral">&quot;localhost#53210&quot;</span>);</div>
<div class="line"><span class="keywordflow">if</span> (VC == NULL)</div>
<div class="line">{</div>
<div class="line">    <span class="keywordtype">int</span> code = virtGetErrorCode(NULL);</div>
<div class="line">    <span class="comment">// Display error message</span></div>
<div class="line">}</div>
</div><!-- fragment --><p> needs to be changed into: </p><div class="fragment"><div class="line"><a class="code" href="class_h_a_p_t_i_o_n_1_1_raptor_a_p_i.html">HAPTION::RaptorAPI</a> *VC = <span class="keyword">new</span> <a class="code" href="class_h_a_p_t_i_o_n_1_1_raptor_a_p_i.html">HAPTION::RaptorAPI</a>();</div>
<div class="line">VC-&gt;<a class="code" href="class_h_a_p_t_i_o_n_1_1_raptor_a_p_i.html#a8dd57923b91f7703f32e509b4b1f0f11">DefineSpecificFields</a>(<span class="stringliteral">&quot;channel=SimpleChannelUDP;localport=3131;remoteip=192.168.100.53;remoteport=5000&quot;</span>);</div>
<div class="line"><a class="code" href="namespace_h_a_p_t_i_o_n.html#a2bc70f945918c02a2321840c292d07c4">HAPTION::ErrorCode</a> error = VC-&gt;<a class="code" href="class_h_a_p_t_i_o_n_1_1_raptor_a_p_i.html#af1c6cf729558de312330b074dcfa919e">Init</a>(<span class="stringliteral">&quot;virtuose_6d_n162.param&quot;</span>);</div>
<div class="line"><span class="keywordflow">if</span> (error != <a class="code" href="namespace_h_a_p_t_i_o_n.html#a2bc70f945918c02a2321840c292d07c4afab94e0fac7e028ed75c31a7c8adc18e">HAPTION::ErrorCode::E_NOERROR</a>)</div>
<div class="line">{</div>
<div class="line">    <span class="comment">// Display error message</span></div>
<div class="line">}</div>
</div><!-- fragment --><p>Two further important modifications are necessary: </p><ol>
<li>
If your code is using the function "virtSetPeriodicFunction" in order to create the periodic loop, then you will need to replace it with another code. See <a class="el" href="index.html#mainloop">Setting up the periodic loop</a>! </li>
<li>
In order to force the update of the device's status and setpoints, you will need to call the methods <a class="el" href="class_h_a_p_t_i_o_n_1_1_raptor_a_p_i.html#ad97bcd2322fb21fbaec3f8bb62d97d4b" title="Perform state update.">HAPTION::RaptorAPI::ReadState</a> and <a class="el" href="class_h_a_p_t_i_o_n_1_1_raptor_a_p_i.html#aa5626a4cc27dbe0cb75c2e6c0b5c2532" title="Perform setpoint update.">HAPTION::RaptorAPI::SendSetpoints</a> in each loop. </li>
</ol>
<p>The table hereafter gives the equivalence of calls between the VirtuoseAPI and the RaptorAPI.</p>
<table class="doxtable">
<tr>
<th>Item </th><th>VirtuoseAPI </th><th>RaptorAPI </th><th>Notes  </th></tr>
<tr>
<td>Opening the connection to the device </td><td>virtOpen </td><td><a class="el" href="class_h_a_p_t_i_o_n_1_1_raptor_a_p_i.html#a8dd57923b91f7703f32e509b4b1f0f11" title="Define field values needed by the specific device.">HAPTION::RaptorAPI::DefineSpecificFields</a> followed by <a class="el" href="class_h_a_p_t_i_o_n_1_1_raptor_a_p_i.html#af1c6cf729558de312330b074dcfa919e" title="Initialize the class object and try to connect to the device with the given configuration file.">HAPTION::RaptorAPI::Init</a> </td><td>Please make sure that the parameter file is accessible, or give the full path!  </td></tr>
<tr>
<td>Closing the connection to the device </td><td>virtClose </td><td><a class="el" href="class_h_a_p_t_i_o_n_1_1_raptor_a_p_i.html#a7d11007a80f47fa5627861daaae27bd6" title="Close the connection and terminate.">HAPTION::RaptorAPI::Close</a> </td><td></td></tr>
<tr>
<td>Rotating the device coordinate system </td><td>virtSetBaseFrame </td><td><a class="el" href="class_h_a_p_t_i_o_n_1_1_raptor_a_p_i.html#adeabc6bf0215aa22c26676a80ac74a06" title="Set the base transformation.">HAPTION::RaptorAPI::ChangeBase</a> </td><td>Now also available with a transformation matrix  </td></tr>
<tr>
<td>Rotating the viewpoint </td><td>virtSetObservationFrame </td><td><a class="el" href="class_h_a_p_t_i_o_n_1_1_raptor_a_p_i.html#af9eafe7707638c8774f28343541023ef" title="Set the viewpoint transformation.">HAPTION::RaptorAPI::ChangeViewpoint</a> </td><td>Now also available with a transformation matrix  </td></tr>
<tr>
<td>Changing the movement scaling </td><td>virtSetSpeedFactor </td><td><a class="el" href="class_h_a_p_t_i_o_n_1_1_raptor_a_p_i.html#a7eb11692fa434ad96b999dbbe6ecb087" title="Change movement scaling.">HAPTION::RaptorAPI::ChangeMovementScale</a> </td><td>Now also available on rotations  </td></tr>
<tr>
<td>Reading the current Cartesian pose </td><td>virtGetPosition </td><td><a class="el" href="class_h_a_p_t_i_o_n_1_1_raptor_a_p_i.html#a80b7d5d3848d43ce07111d404b46c7b7" title="Get the current (relative) Cartesian pose.">HAPTION::RaptorAPI::GetCartesianPose</a> </td><td>Now also available with a transformation matrix  </td></tr>
<tr>
<td>Reading the current Cartesian speed </td><td>virtGetSpeed </td><td><a class="el" href="class_h_a_p_t_i_o_n_1_1_raptor_a_p_i.html#a1a395f3b5f000c6fd339ae42b7a75e25" title="Get the current (relative) Cartesian speed.">HAPTION::RaptorAPI::GetCartesianSpeed</a> </td><td></td></tr>
<tr>
<td>Reading the current joint angles </td><td>virtGetArticularPosition </td><td><a class="el" href="class_h_a_p_t_i_o_n_1_1_raptor_a_p_i.html#a971ea62814a203f1584eaf885ca5ff42" title="Get the current joint angles.">HAPTION::RaptorAPI::GetJointAngles</a> </td><td></td></tr>
<tr>
<td>Reading the current joint speed </td><td>virtGetArticularSpeed </td><td><a class="el" href="class_h_a_p_t_i_o_n_1_1_raptor_a_p_i.html#a0009035dd858840d4b510c4821b0cf49" title="Get the current joint speeds.">HAPTION::RaptorAPI::GetJointSpeeds</a> </td><td></td></tr>
<tr>
<td>Reading the current joint speed </td><td>virtGetArticularSpeed </td><td><a class="el" href="class_h_a_p_t_i_o_n_1_1_raptor_a_p_i.html#a0009035dd858840d4b510c4821b0cf49" title="Get the current joint speeds.">HAPTION::RaptorAPI::GetJointSpeeds</a> </td><td></td></tr>
<tr>
<td>Setting gains on the device </td><td>virtAttachVO or virtAttachQSVO </td><td><a class="el" href="class_h_a_p_t_i_o_n_1_1_raptor_a_p_i.html#ad449960b217c1eeb6881f17604bb6688" title="Change the Cartesian gains.">HAPTION::RaptorAPI::ChangeCartesianGains</a> </td><td>Warning: you will probably need to change the gains, even if you were using "virtAttachQSVO" before.  </td></tr>
<tr>
<td>Switching to Cartesian position control </td><td>virtSetCommandType(COMMAND_TYPE_VIRTMECH) </td><td><a class="el" href="class_h_a_p_t_i_o_n_1_1_raptor_a_p_i.html#a51934ba613594887a7e7c099ae017ffb" title="Start Cartesian position control mode.">HAPTION::RaptorAPI::StartCartesianPositionMode</a> </td><td></td></tr>
<tr>
<td>Switching to joint position control </td><td>virtSetCommandType(COMMAND_TYPE_ARTICULAR) </td><td><a class="el" href="class_h_a_p_t_i_o_n_1_1_raptor_a_p_i.html#adfa5f08c344a1c09eccf680b532a1760" title="Start joint position control mode.">HAPTION::RaptorAPI::StartJointPositionMode</a> </td><td></td></tr>
<tr>
<td>Enabling force-feedback </td><td>virtSetPowerOn </td><td><a class="el" href="class_h_a_p_t_i_o_n_1_1_raptor_a_p_i.html#a34aab8ce513627579cc36dcc4d904d09" title="Activate or deactivate force-feedback.">HAPTION::RaptorAPI::ActivateForceFeedback</a> </td><td></td></tr>
<tr>
<td>Checking if force-feedback is active </td><td>virtGetPowerOn </td><td><a class="el" href="class_h_a_p_t_i_o_n_1_1_raptor_a_p_i.html#acbb7591b77f176df6d963d2fe02400c7" title="Get the status of motor power.">HAPTION::RaptorAPI::GetPowerStatus</a> </td><td>The RaptorAPI gives more relevant information, equivalent to combining virtGetPowerOn and virtGetDeadMan.  </td></tr>
<tr>
<td>Resetting the clutch offset </td><td>virtAttachVO or virtAttachQSVO followed by virtSetPosition </td><td><a class="el" href="class_h_a_p_t_i_o_n_1_1_raptor_a_p_i.html#a5f8336ebf722018300a8681111226910" title="Force the current Cartesian pose, overwriting the clutch offset.">HAPTION::RaptorAPI::ForceCartesianPose</a> </td><td>Now also available with a transformation matrix  </td></tr>
<tr>
<td>Setting the Cartesian pose setpoint </td><td>virtSetPosition </td><td><a class="el" href="class_h_a_p_t_i_o_n_1_1_raptor_a_p_i.html#ae7a8a1e17a08d00c8bbc9884247e2343" title="Set a Cartesian pose setpoint.">HAPTION::RaptorAPI::SetCartesianPose</a> </td><td>Now also available with a transformation matrix  </td></tr>
<tr>
<td>Setting the Cartesian speed setpoint </td><td>virtSetSpeed </td><td><a class="el" href="class_h_a_p_t_i_o_n_1_1_raptor_a_p_i.html#ab03102a1b80dad3002e8ff5c28f4264c" title="Set a Cartesian speed setpoint.">HAPTION::RaptorAPI::SetCartesianSpeed</a> </td><td></td></tr>
<tr>
<td>Setting the Cartesian force setpoint </td><td>virtSetForce </td><td><a class="el" href="class_h_a_p_t_i_o_n_1_1_raptor_a_p_i.html#a88d1328364c04a4060e8e7d8628aeeb2" title="Add a Cartesian force overlay.">HAPTION::RaptorAPI::AddCartesianForceOverlay</a> </td><td>You need to send with SetCartesianPose and SetCartesianSpeed the current pose and speed of the device (as given by GetCartesianPose and GetCartesianSpeed), otherwise the software will give a drag error!  </td></tr>
<tr>
<td>Getting the force applied by the operator </td><td>virtGetForce </td><td><a class="el" href="class_h_a_p_t_i_o_n_1_1_raptor_a_p_i.html#a805ac7a7693947d9a76d2b97920e96bf" title="Get the current Cartesian force applied by the device on the operator&#39;s hand.">HAPTION::RaptorAPI::GetCartesianForce</a> </td><td></td></tr>
<tr>
<td>Setting the joint angle setpoint </td><td>virtSetArticularPosition </td><td><a class="el" href="class_h_a_p_t_i_o_n_1_1_raptor_a_p_i.html#a6b2c1246bb6f8fa5eaa1dc20712663c2" title="Set a joint angle setpoint.">HAPTION::RaptorAPI::SetJointAngles</a> </td><td></td></tr>
<tr>
<td>Setting the joint speed setpoint </td><td>virtSetArticularSpeed </td><td><a class="el" href="class_h_a_p_t_i_o_n_1_1_raptor_a_p_i.html#a15a03bfb38ff739e8a6b5481ac26d369" title="Set a joint speed setpoint.">HAPTION::RaptorAPI::SetJointSpeeds</a> </td><td></td></tr>
<tr>
<td>Setting the joint torque setpoint </td><td>virtSetArticularForce </td><td><a class="el" href="class_h_a_p_t_i_o_n_1_1_raptor_a_p_i.html#a2ead50ba4cd48c9b7645a5870b278b1b" title="Add a joint torque overlay.">HAPTION::RaptorAPI::AddJointTorqueOverlay</a> </td><td>You need to send with SetJointAngles and SetJointSpeeds the current pose and speed of the device (as given by GetJointAngles and GetJointSpeeds), otherwise the software will give a drag error!   </td></tr>
<tr>
<td>Reading the state of a button </td><td>virtGetButton </td><td><a class="el" href="class_h_a_p_t_i_o_n_1_1_raptor_a_p_i.html#a66ad466b68b1a882db5c77bfd67616a7" title="Get the status of an operator button.">HAPTION::RaptorAPI::GetOperatorButton</a> </td><td>Now with a clear identification of the buttons!  </td></tr>
<tr>
<td>Reading the value of the analog trigger </td><td>virtGetArticularSpeedOfAdditionalAxe </td><td><a class="el" href="class_h_a_p_t_i_o_n_1_1_raptor_a_p_i.html#a271235199eebdbcec9f6a98fc3479551" title="Get the value of the trigger device.">HAPTION::RaptorAPI::GetTriggerValue</a> </td><td>Only available on the TREH handle.  </td></tr>
</table>
<h2><a class="anchor" id="newvirtuoseapi"></a>
New functionalities</h2>
<p>With respect to the VirtuoseAPI, you will benefit from the following new functionalities: </p><ul>
<li>
Reading the calibration status of the device with <a class="el" href="class_h_a_p_t_i_o_n_1_1_raptor_a_p_i.html#a227eea3581a66dd49f16ab2a983152ca" title="Get the calibration status of the device.">HAPTION::RaptorAPI::GetCalibrationStatus</a>. With the VirtuoseAPI, it was just not possible, except by checking the error status of virtOpen. </li>
<li>
Calibrating the device with <a class="el" href="class_h_a_p_t_i_o_n_1_1_raptor_a_p_i.html#ac48c7fadf530f4ffdaa48fb52d988ed0" title="Perform the device calibration.">HAPTION::RaptorAPI::DoCalibration</a>. With the VirtuoseAPI, it was just not possible. </li>
<li>
Reading the maximum Cartesian position gains with <a class="el" href="class_h_a_p_t_i_o_n_1_1_raptor_a_p_i.html#a61fea9bb484bbbc7a39b326ffaadc478" title="Get the maximum value of the cartesian gains.">HAPTION::RaptorAPI::GetMaxCartesianGains</a>. With the VirtuoseAPI, it was just not possible. </li>
<li>
Reading the maximum joint angle gains with <a class="el" href="class_h_a_p_t_i_o_n_1_1_raptor_a_p_i.html#a3c54802388ab689cd085bfa76f2684cc" title="Get the maximum value of the joint gains.">HAPTION::RaptorAPI::GetMaxJointGains</a>. With the VirtuoseAPI, it was just not possible. </li>
<li>
Reading the current status of the state machine with <a class="el" href="class_h_a_p_t_i_o_n_1_1_raptor_a_p_i.html#a6cbeced9d81efd684aac5a572381ffd8" title="Get the status of the automaton.">HAPTION::RaptorAPI::GetAutomatonStatus</a>. With the VirtuoseAPI, it was just not possible. </li>
<li>
Reading the current clutch offset directly with <a class="el" href="class_h_a_p_t_i_o_n_1_1_raptor_a_p_i.html#a77efbcc2d258728d96dd98fac7267d19" title="Get the current clutch offset.">HAPTION::RaptorAPI::GetClutchOffset</a>. With the VirtuoseAPI, it was only possible by combining the results of virtGetPosition and virtGetPhysicalPosition and performing complex calculations involving the movement scaling factor. </li>
</ul>
<h1><a class="anchor" id="codesamples"></a>
Example test programs</h1>
<p>The RaptorAPI is provided with a number of example test programs. All those programs are console-only, i.e. they don't provide a graphical user interface.</p>
<ul>
<li>
<a class="el" href="group___test_calibration.html">TestCalibration.cpp</a> <br  />
 This program performs the calibration of the force-feedback manipulator.  </li>
<li>
<a class="el" href="group___test_joint_angles.html">TestJointAngles.cpp</a> <br  />
 This program implements a free-drive mode in joint space, and prints out the joint angles at regular intervals.  </li>
<li>
<a class="el" href="group___test_blocked_mode.html">TestBlockedMode.cpp</a> <br  />
 This program implements a blocked mode in Cartesian space, and prints out the Cartesian force applied by the operator at regular intervals.  </li>
<li>
<a class="el" href="group___test_impedance.html">TestImpedance.cpp</a> <br  />
 This program implements a simple virtual table in Cartesian space, in impedance mode. The table is a simple constraint on the vertical direction, located 10 cm below the starting point. The constraint is penalized linearly.  </li>
<li>
<a class="el" href="group___test_joint_impedance.html">TestJointImpedance.cpp</a> <br  />
 This program implements a simple constraint in joint space, in impedance mode. The table is a simple constraint on the first joint, towards negative angles. The constraint is penalized linearly.  </li>
<li>
<a class="el" href="group___test_joint_blocked_mode.html">TestJointBlockedMode.cpp</a> <br  />
 This program implements a blocked mode in joint space.  </li>
<li>
<a class="el" href="group___test_two_devices.html">TestTwoDevices.cpp</a> <br  />
 This program shows how to connect to two devices from the same thread.  </li>
</ul>
<h1><a class="anchor" id="notes"></a>
Notes</h1>
<p>This section contains notes about the current implementation of the RaptorAPI.</p>
<h2><a class="anchor" id="limitations"></a>
Limited implementation</h2>
<p>The implementation of the following methods is not complete yet: </p><ul>
<li>
<b><a class="el" href="class_h_a_p_t_i_o_n_1_1_raptor_a_p_i.html#a827bb639dcf14efc63fd05311b82aceb" title="Define the clutching mode.">HAPTION::RaptorAPI::DefineClutchingMode</a></b> is reserved for future use, and currently not available at all. </li>
<li>
<b><a class="el" href="class_h_a_p_t_i_o_n_1_1_raptor_a_p_i.html#a9ab54edc8bfab714333fd22cc8faae91" title="Change the anticipation factor for pose setpoints.">HAPTION::RaptorAPI::ChangeAnticipationFactor</a></b> is reserved for future use, and currently not available at all. </li>
<li>
<b><a class="el" href="class_h_a_p_t_i_o_n_1_1_raptor_a_p_i.html#a21b456198a1919527cae2a76ac792004" title="Define the height of the operator.">HAPTION::RaptorAPI::DefineOperatorHeight</a></b> is reserved for future use, and currently not available at all. </li>
<li>
<b><a class="el" href="class_h_a_p_t_i_o_n_1_1_raptor_a_p_i.html#aaecdca7d63e49eb11044da17d558d675" title="Get the value of a configuration parameter of type string.">HAPTION::RaptorAPI::GetParameterValue</a></b> is only partially implemented, for returning a string: regardless of their type, all parameters are returned as a string, possibly with several values in a row. </li>
</ul>
<h2><a class="anchor" id="parameter_list"></a>
List of parameters for Achille device</h2>
<ul>
<li>
RaptorAPI.DLLName </li>
<li>
JointController.ParamFileHash </li>
<li>
JointController.MCUDevIDLow </li>
<li>
JointController.MCUDevIDHigh </li>
<li>
JointController.IP_Address </li>
<li>
JointController.Port </li>
<li>
JointController.Ethercat </li>
<li>
JointController.ActivationToggle </li>
<li>
JointController.Handle </li>
<li>
JointController.Buttons_Box </li>
<li>
JointController.TrigADCPotentiometerID </li>
<li>
JointController.TrigADCPotentiometerOffset </li>
<li>
JointController.TrigPotentiometerGain </li>
<li>
JointController.RotPotentiometerOffset </li>
<li>
JointController.RotPotentiometerGain </li>
<li>
JointController.CalibrationType </li>
<li>
JointController.PowerButtonBit </li>
<li>
JointController.DeadmanButtonBit </li>
<li>
JointController.ClutchButtonBit </li>
<li>
JointController.TriggerLockButtonBit </li>
<li>
JointController.NextButtonBit </li>
<li>
JointController.RotPlusButtonBit </li>
<li>
JointController.RotMinusButtonBit </li>
<li>
JointController.StopButtonBit </li>
<li>
JointController.WaitButtonBit </li>
<li>
JointController.ElbowPlusButtonBit </li>
<li>
JointController.ElbowMinusButtonBit </li>
<li>
JointController.LeftButtonBit </li>
<li>
JointController.RightButtonBit </li>
<li>
JointController.ForceHighButtonBit </li>
<li>
JointController.ForceLowButtonBit </li>
<li>
JointController.PrecisionPlusButtonBit </li>
<li>
JointController.PrecisionMinusButtonBit </li>
<li>
JointController.RelayDeadmanBit </li>
<li>
JointController.MotorSpeedMax </li>
<li>
JointController.MotorLimitRange </li>
<li>
JointController.LowerJointLimit </li>
<li>
JointController.UpperJointLimit </li>
<li>
JointController.EnableSoftwareLimits </li>
<li>
JointController.AbsoluteEncoderOrientation </li>
<li>
JointController.AbsoluteEncoderPrecision </li>
<li>
JointController.AbsoluteEncoderOffset </li>
<li>
JointController.EssentialEncoderOffset </li>
<li>
JointController.EncoderMismatchThreshold </li>
<li>
JointController.ToolDetectionPSOffset </li>
<li>
JointController.ToolDetectionPSGain </li>
<li>
JointController.ToolDetectionRSGain </li>
<li>
JointController.Q3AnalogControlSensorOffset </li>
<li>
JointController.Q3AnalogControlSensorSaturation </li>
<li>
JointController.DisconnectionBrightness </li>
<li>
Robot.SegmentLength </li>
<li>
Robot.Joint1 </li>
<li>
Robot.Joint2 </li>
<li>
Robot.Joint3 </li>
<li>
Robot.Joint4 </li>
<li>
Robot.Joint5 </li>
<li>
Robot.Joint6 </li>
<li>
Robot.Joint7 </li>
<li>
Robot.TCP </li>
<li>
Robot.MaxTCP </li>
<li>
CartesianController.UsePowerButton </li>
<li>
CartesianController.DragTransPoseErrorThreshold </li>
<li>
CartesianController.DragRotPoseErrorThreshold </li>
<li>
CartesianController.DragTransSpeedErrorThreshold </li>
<li>
CartesianController.DragRotSpeedErrorThreshold </li>
<li>
CartesianController.DiscTransPoseErrorThreshold </li>
<li>
CartesianController.DiscRotPoseErrorThreshold </li>
<li>
CartesianController.DiscTransSpeedErrorThreshold </li>
<li>
CartesianController.DiscRotSpeedErrorThreshold </li>
<li>
CartesianController.DragJointErrorThreshold </li>
<li>
CartesianController.DiscJointErrorThreshold </li>
<li>
CartesianController.MaxJointK </li>
<li>
CartesianController.MaxJointB </li>
<li>
CartesianController.MaxCartKT </li>
<li>
CartesianController.MaxCartBT </li>
<li>
CartesianController.MaxCartKR </li>
<li>
CartesianController.MaxCartBR </li>
<li>
CartesianController.MaxCartTranslationForce </li>
<li>
CartesianController.MaxCartRotationTorque </li>
<li>
CartesianController.MaxJointTorque </li>
<li>
CartesianController.DryFrictionGain </li>
<li>
CartesianController.DryFrictionSlope </li>
<li>
CartesianController.ViscousFrictionGain </li>
<li>
JointController.SerialNumber </li>
<li>
JointController.Revision </li>
<li>
JointController.FullName </li>
<li>
JointController.MotorsNumber </li>
<li>
JointController.ActivationChecksum </li>
<li>
JointController.CoderPointsNb </li>
<li>
JointController.Kt </li>
<li>
JointController.KconvI </li>
<li>
JointController.Kp_P </li>
<li>
JointController.Kd_P </li>
<li>
JointController.Kp_V </li>
<li>
JointController.Kp_I </li>
<li>
JointController.Ki_I </li>
<li>
JointController.VariatorGains </li>
<li>
JointController.NominalCurrent </li>
<li>
JointController.I2TTorque </li>
<li>
JointController.CalibrationCurrentThreshold </li>
<li>
JointController.CalibrationMotorSpeed </li>
<li>
JointController.InitializationPosition </li>
<li>
JointController.InfiniteRotation </li>
<li>
JointController.MotorsOrientation </li>
<li>
JointController.CouplingMatrixRow1 </li>
<li>
JointController.CouplingMatrixRow2 </li>
<li>
JointController.CouplingMatrixRow3 </li>
<li>
JointController.CouplingMatrixRow4 </li>
<li>
JointController.CouplingMatrixRow5 </li>
<li>
JointController.CouplingMatrixRow6 </li>
<li>
JointController.CouplingMatrixRow7 </li>
<li>
JointController.UseManualCalibrationBit </li>
<li>
JointController.OnesComplement </li>
<li>
Robot.SpringMassCompensation </li>
<li>
Robot.SpringCompensationOffset </li>
<li>
Robot.Tool_Mass </li>
<li>
Robot.Tool_CoM_x </li>
<li>
Robot.Tool_CoM_y </li>
<li>
Robot.Tool_CoM_z </li>
<li>
Robot.Mass </li>
<li>
Robot.CoM_x </li>
<li>
Robot.CoM_y </li>
<li>
Robot.CoM_z </li>
<li>
Robot.Joint_Pose_x </li>
<li>
Robot.Joint_Pose_y </li>
<li>
Robot.Joint_Pose_z </li>
<li>
CartesianController.InertiaCompensationAlpha </li>
<li>
CartesianController.MotorsInertia </li>
</ul>
<h1><a class="anchor" id="legal"></a>
Legal Information</h1>
<p>The software RaptorAPI is the property of the company Haption:<br  />
</p>
<p>Haption SA <br  />
 8 Route de Laval <br  />
 53210 Soulge-sur-Ouette <br  />
 France <br  />
</p>
<p>Tel: +33(0)243645120 <br  />
 E-Mail: <a href="#" onclick="location.href='mai'+'lto:'+'con'+'ta'+'ct@'+'ha'+'pti'+'on'+'.co'+'m'; return false;">conta<span style="display: none;">.nosp@m.</span>ct@h<span style="display: none;">.nosp@m.</span>aptio<span style="display: none;">.nosp@m.</span>n.co<span style="display: none;">.nosp@m.</span>m</a> <br  />
 </p>
</div></div><!-- PageDoc -->
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.1 </li>
  </ul>
</div>
</body>
</html>
